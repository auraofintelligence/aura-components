<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura of Intelligence - Torus Formation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Dark with Red Accent -->
    <!-- Application Structure Plan: A multi-page application structure. The left toolbar now functions as the main navigation. Each button corresponds to a 'page' (a full-screen div). JavaScript manages showing/hiding pages and highlighting the active button. This creates a scalable SPA framework. -->
    <!-- Visualization & Content Choices: Report Info: 12x24 Matrix Tables. Goal: Show the physical formation of the horn torus. Viz Method: A 3D scene using Three.js. Interaction: Raycasting detects clicks/drags for persistent facet selection. Camera controls are toggled with the spacebar. The step counter logic is fixed to count per-action instead of per-frame. The corner gizmo is now fully decoupled from the main camera's position. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { 
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }
        .page-content {
            display: none;
        }
        .page-content.active {
            display: block;
        }
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1; /* Behind UI */
        }
        #controls {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        #right-sidebar {
            position: fixed;
            top: 50%;
            right: 1.5rem;
            transform: translateY(-50%);
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            border-radius: 9999px;
        }
        #left-toolbar {
            position: fixed;
            top: 50%;
            left: 1rem;
            transform: translateY(-50%);
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        .sidebar-icon {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            line-height: 1;
            color: rgba(255,255,255,0.7);
        }
        .sidebar-icon:hover {
            transform: scale(1.1);
        }
        .chakra-dot.active {
            box-shadow: 0 0 15px 3px var(--glow-color), 0 0 5px 1px var(--glow-color) inset;
            border-color: rgba(255,255,255,0.9);
        }
        #gizmo-container {
            width: 100px;
            height: 100px;
        }
        #gizmo-controls {
            background-color: rgba(0,0,0,0.5);
            padding: 0.5rem;
            border-radius: 0.5rem;
        }
        .switch { position: relative; display: inline-block; width: 34px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #4A5568; transition: .4s; border-radius: 20px; }
        .slider:before { position: absolute; content: ""; height: 12px; width: 12px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #48BB78; }
        input:checked + .slider:before { transform: translateX(14px); }
        .left-toolbar-btn {
            background-color: rgba(31, 41, 55, 0.7);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(75, 85, 99, 0.5);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
            width: 150px;
            text-align: center;
        }
        .left-toolbar-btn:hover {
            background-color: rgba(55, 65, 81, 0.8);
        }
        .left-toolbar-btn.active {
             background-color: rgba(79, 70, 229, 0.8);
             border-color: rgba(129, 140, 248, 0.7);
        }
        .welcome-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 2rem;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(8px);
            border-radius: 1rem;
            text-align: center;
            z-index: 100;
        }
        .tooltip {
            position: relative;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: #1f2937;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .timeline-view { display: none; }
        .timeline-view.active { display: block; }
        
        /* Timeline Mastery Styles */
        .calendar-container {
            background: rgba(31, 41, 55, 0.8);
            border-radius: 0.5rem;
            padding: 1rem;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .calendar-grid {
            display: grid;
            gap: 0.25rem;
            flex: 1;
            min-height: 0;
        }
        
        .calendar-day {
            min-height: 3rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            position: relative;
            padding: 0.5rem;
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            overflow: hidden;
        }
        
        .calendar-day:hover {
            background-color: rgba(55, 65, 81, 0.8);
            transform: scale(1.02);
        }
        
        .calendar-day.other-month {
            opacity: 0.4;
            color: rgba(156, 163, 175, 0.8);
        }
        
        .calendar-day.other-period {
            opacity: 0.4;
            color: rgba(156, 163, 175, 0.8);
        }
        
        .calendar-day.today {
            background-color: rgba(59, 130, 246, 0.8);
            color: white;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .event-indicator {
            font-size: 0.75rem;
            padding: 0.125rem 0.25rem;
            border-radius: 0.125rem;
            margin: 0.125rem 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        
        .event-blue { background-color: rgba(59, 130, 246, 0.8); color: white; }
        .event-red { background-color: rgba(239, 68, 68, 0.8); color: white; }
        .event-green { background-color: rgba(34, 197, 94, 0.8); color: white; }
        .event-yellow { background-color: rgba(234, 179, 8, 0.8); color: black; }
        .event-purple { background-color: rgba(147, 51, 234, 0.8); color: white; }
        .event-pink { background-color: rgba(236, 72, 153, 0.8); color: white; }
        .event-orange { background-color: rgba(249, 115, 22, 0.8); color: white; }
        .event-teal { background-color: rgba(20, 184, 166, 0.8); color: white; }
        
        /* Annual view styles - improved space utilization */
        .calendar-grid.annual-view {
            grid-template-columns: repeat(12, 1fr);
            gap: 0.5rem;
            height: 100%;
        }
        
        .annual-view .calendar-day {
            min-height: 2rem;
            font-size: 0.75rem;
            padding: 0.25rem;
        }
        
        /* Responsive design for annual view */
        @media (max-width: 1200px) {
            .calendar-grid.annual-view {
                grid-template-columns: repeat(6, 1fr);
                gap: 0.375rem;
            }
            
            .annual-view .calendar-day {
                min-height: 1.75rem;
                font-size: 0.625rem;
                padding: 0.125rem;
            }
        }
        
        @media (max-width: 768px) {
            .calendar-grid.annual-view {
                grid-template-columns: repeat(4, 1fr);
                gap: 0.25rem;
            }
            
            .annual-view .calendar-day {
                min-height: 1.5rem;
                font-size: 0.5rem;
                padding: 0.125rem;
            }
        }
        
        @media (max-width: 480px) {
            .calendar-grid.annual-view {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.125rem;
            }
            
            .annual-view .calendar-day {
                min-height: 1.25rem;
                font-size: 0.375rem;
                padding: 0.0625rem;
            }
        }
        
        /* Yearly view styles - improved space utilization */
        .calendar-grid.yearly-view {
            grid-template-columns: repeat(10, 1fr);
            gap: 0.5rem;
            height: 100%;
        }
        
        .yearly-view .calendar-day {
            min-height: 2.5rem;
            font-size: 0.875rem;
            padding: 0.375rem;
        }
        
        /* Quarterly and Seasonal view styles */
        .calendar-grid.quarterly-view,
        .calendar-grid.seasonal-view {
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
        }
        
        /* Weekly view - Google Calendar style with time segments */
        .calendar-grid.weekly-view {
            display: grid;
            grid-template-columns: 80px 1fr;
            grid-template-rows: 60px repeat(7, 1fr);
            gap: 1px;
            height: 100%;
            background-color: #374151;
        }
        
        .weekly-view .time-header {
            background-color: #1f2937;
            border-bottom: 1px solid #4b5563;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #9ca3af;
        }
        
        .weekly-view .day-header {
            background-color: #1f2937;
            border-bottom: 1px solid #4b5563;
            border-right: 1px solid #4b5563;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #9ca3af;
            padding: 0.5rem;
        }
        
        .weekly-view .time-slot {
            background-color: #374151;
            border-right: 1px solid #4b5563;
            border-bottom: 1px solid #4b5563;
            padding: 0.25rem;
            position: relative;
            min-height: 60px;
            display: flex;
            flex-direction: column;
        }
        
        .weekly-view .day-column {
            display: flex;
            flex-direction: column;
            border-right: 1px solid #4b5563;
        }
        
        .weekly-view .day-slot {
            background-color: #374151;
            border-bottom: 1px solid #4b5563;
            padding: 0.5rem;
            position: relative;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .weekly-view .day-slot:hover {
            background-color: #4b5563;
        }
        
        .weekly-view .day-slot.today {
            background-color: #1e40af;
            color: white;
        }
        
        .weekly-view .time-label {
            font-size: 0.75rem;
            color: #9ca3af;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }
        
        .weekly-view .phase-label {
            font-size: 0.75rem;
            color: #d1d5db;
            font-weight: 600;
            text-align: center;
            margin-bottom: 0.25rem;
        }
        
        .weekly-view .event-item {
            background-color: #3b82f6;
            color: white;
            padding: 0.125rem 0.25rem;
            margin: 0.125rem 0;
            border-radius: 0.125rem;
            font-size: 0.75rem;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .weekly-view .event-item.event-red { background-color: #ef4444; }
        .weekly-view .event-item.event-green { background-color: #10b981; }
        .weekly-view .event-item.event-yellow { background-color: #f59e0b; }
        .weekly-view .event-item.event-purple { background-color: #8b5cf6; }
        .weekly-view .event-item.event-pink { background-color: #ec4899; }
        
        /* Monthly view - fill whole space */
        .calendar-grid.monthly-view {
            grid-template-columns: repeat(7, 1fr);
            grid-template-rows: repeat(6, 1fr);
            gap: 0.25rem;
            height: 100%;
        }
        
        .monthly-view .calendar-day {
            min-height: 5rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            font-size: 1rem;
            padding: 0.5rem;
        }
        
        /* Quarterly view - 3 months side by side */
        .calendar-grid.quarterly-view {
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            height: 100%;
        }
        
        .quarterly-view .calendar-day {
            min-height: 3rem;
            font-size: 0.875rem;
            padding: 0.25rem;
        }
        
        /* Seasonal view - 3 months side by side */
        .calendar-grid.seasonal-view {
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            height: 100%;
        }
        
        .seasonal-view .calendar-day {
            min-height: 3rem;
            font-size: 0.875rem;
            padding: 0.25rem;
        }
        
        /* Lunar Calendar Styles - improved space utilization */
        .lunar-calendar-container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .lunar-calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
            flex: 1;
            min-height: 0;
        }
        
        .lunar-day {
            min-height: 4rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 0.5rem;
        }
        
        .lunar-day:hover {
            background-color: rgba(55, 65, 81, 0.8);
            transform: scale(1.05);
        }
        
        /* Zodiac Wheel Styles - improved space utilization */
        .zodiac-wheel {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .zodiac-wheel .grid {
            flex: 1;
            min-height: 0;
        }
        
        .zodiac-sign {
            transition: all 0.3s ease;
            min-height: 5rem;
        }
        
        .zodiac-sign:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .zodiac-sign.active {
            background-color: rgba(59, 130, 246, 0.8);
            color: white;
        }
        
        /* Planet Info Styles */
        .planet-info {
            transition: all 0.2s ease;
            min-height: 4rem;
        }
        
        .planet-info:hover {
            transform: scale(1.02);
        }
        
        /* Countdown Styles */
        .countdown-item {
            transition: all 0.3s ease;
        }
        
        .countdown-item:hover {
            transform: translateX(4px);
        }
        
        /* Modal Styles */
        .modal-overlay {
            backdrop-filter: blur(4px);
        }
        
        /* Timeline View Styles */
        .timeline-view {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
            height: 100%;
        }
        
        .timeline-view.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Responsive improvements */
        @media (max-width: 640px) {
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 0.125rem;
            }
            .calendar-day {
                min-height: 2.5rem;
                padding: 0.25rem;
                font-size: 0.75rem;
            }
            .event-indicator {
                font-size: 0.625rem;
                padding: 0.0625rem 0.125rem;
            }
            .calendar-grid.annual-view {
                grid-template-columns: repeat(6, 1fr);
            }
            .calendar-grid.yearly-view {
                grid-template-columns: repeat(5, 1fr);
            }
        }
        
        /* Timeline main content improvements */
        #timeline-main-content {
            height: calc(100vh - 200px);
            overflow: hidden;
        }
        
        /* Timeline view container improvements */
        .timeline-view {
            height: 100%;
            overflow-y: auto;
        }
        
        /* Responsive design for quarterly and seasonal views */
        @media (max-width: 768px) {
            .calendar-grid.quarterly-view,
            .calendar-grid.seasonal-view {
                grid-template-columns: repeat(1, 1fr);
                gap: 0.5rem;
            }
            
            .quarterly-view .calendar-day,
            .seasonal-view .calendar-day {
                min-height: 2.5rem;
                font-size: 0.75rem;
                padding: 0.375rem;
            }
        }
    </style>
</head>
<body class="bg-neutral-900 text-white">

    <div id="canvas-container"></div>
    
    <!-- Page Content Containers -->
    <div id="aura-builder-page" class="page-content active">
        <div id="left-toolbar-aura" class="fixed bottom-1rem left-1rem z-10 flex flex-col-reverse items-center gap-4" style="position: fixed; bottom: 1rem; left: 1rem;">
             <div id="step-counter-container" class="text-sm text-center bg-black/50 p-2 rounded-lg">
                <p>Step: <span id="step-counter">0</span></p>
             </div>
             <div id="gizmo-controls" class="flex items-center space-x-2 text-sm bg-black/50 p-2 rounded-lg">
                <label for="worldOriginToggle">World Origin</label>
                <label class="switch">
                    <input type="checkbox" id="worldOriginToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div id="gizmo-container"></div>
        </div>
        <div id="header-info" class="fixed top-4 left-1/2 -translate-x-1/2 z-10 bg-black/50 p-2 px-4 rounded-lg text-sm flex flex-col items-center gap-2">
            <p id="active-chakra-header" class="font-bold text-lg"></p>
            <p>Hold <kbd class="px-2 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg">Space</kbd> to move camera</p>
        </div>
        <div id="controls" class="bg-black/50 backdrop-blur-sm p-4 rounded-lg flex items-center space-x-4">
            <select id="viewSelect" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                <option value="flat">Flat View</option>
                <option value="torus">Torus View</option>
            </select>
            <button id="interiorBtn" class="hidden px-6 py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition whitespace-nowrap">Enter Interior</button>
            <select id="textToggleSelect" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                <option value="Normal">Text: Normal</option>
                <option value="Off">Text: Off</option>
                <option value="Mirrored">Text: Mirrored</option>
            </select>
            <button id="saveBtn" class="px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition">Save</button>
            <button id="loadBtn" class="px-4 py-2 bg-yellow-600 text-white font-semibold rounded-lg hover:bg-yellow-700 transition">Load</button>
            <button id="resetBtn" class="px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition">Reset</button>
        </div>
        <div id="right-sidebar"></div>
    </div>

    <div id="avatar-builder-page" class="page-content">
        <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-full max-w-6xl h-[90vh] bg-black/50 backdrop-blur-sm rounded-lg p-8 overflow-y-auto">
                <h1 class="text-3xl font-bold text-center mb-6">Avatar Builder</h1>
                
                <!-- Progress Indicator -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-400">Profile Completion</span>
                        <span id="profile-completion" class="text-sm font-semibold">0%</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="completion-bar" class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Left Column: Data Input -->
                    <div class="space-y-6">
                        <!-- Physical Profile (Enhanced) -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🧬</span>
                                Physical Profile (Vector-Driven)
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Age Vector</label>
                                    <input type="number" id="age-input" placeholder="Age" class="bg-gray-700 border border-gray-600 rounded p-2 w-full" data-vector="demographic">
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Height (cm)</label>
                                    <input type="number" id="height-input" placeholder="180" class="bg-gray-700 border border-gray-600 rounded p-2 w-full" data-vector="physical">
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Weight (kg)</label>
                                    <input type="number" id="weight-input" placeholder="70" class="bg-gray-700 border border-gray-600 rounded p-2 w-full" data-vector="physical">
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">BMI</label>
                                    <div id="bmi-display" class="bg-gray-700 p-2 rounded text-center">--</div>
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Blood Type</label>
                                    <select id="blood-type" class="bg-gray-700 border border-gray-600 rounded p-2 w-full" data-vector="medical">
                                        <option value="">Select type</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Genetic Markers</label>
                                    <button id="scan-genetics" class="w-full px-4 py-2 bg-purple-600 rounded hover:bg-purple-700 transition">🧬 Scan DNA</button>
                                </div>
                                <div class="md:col-span-2 space-y-2">
                                    <label class="block text-sm text-gray-400">Physical Modifications</label>
                                    <textarea id="modifications" placeholder="Tattoos, implants, piercings, etc." class="bg-gray-700 border border-gray-600 rounded p-2 w-full h-20" data-vector="physical"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- IoT Integration (Real-time) -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📱</span>
                                IoT Data Stream (Live)
                            </h2>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-400">Device Connection</span>
                                    <button id="connect-devices" class="px-4 py-2 bg-green-600 rounded hover:bg-green-700 transition">Connect Devices</button>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div class="bg-gray-700 p-4 rounded text-center">
                                        <div class="text-2xl mb-2">💓</div>
                                        <div class="text-sm text-gray-400">Heart Rate</div>
                                        <div id="heart-rate" class="text-2xl font-bold text-red-400">-- BPM</div>
                                        <div id="hr-trend" class="text-xs text-gray-500">↗️ +2</div>
                                    </div>
                                    <div class="bg-gray-700 p-4 rounded text-center">
                                        <div class="text-2xl mb-2">😴</div>
                                        <div class="text-sm text-gray-400">Sleep Quality</div>
                                        <div id="sleep-score" class="text-2xl font-bold text-blue-400">--/100</div>
                                        <div id="sleep-duration" class="text-xs text-gray-500">7.2h</div>
                                    </div>
                                    <div class="bg-gray-700 p-4 rounded text-center">
                                        <div class="text-2xl mb-2">👟</div>
                                        <div class="text-sm text-gray-400">Activity</div>
                                        <div id="steps" class="text-2xl font-bold text-green-400">--</div>
                                        <div id="calories" class="text-xs text-gray-500">-- kcal</div>
                                    </div>
                                    <div class="bg-gray-700 p-4 rounded text-center">
                                        <div class="text-2xl mb-2">🫁</div>
                                        <div class="text-sm text-gray-400">SPO2</div>
                                        <div id="spo2" class="text-2xl font-bold text-cyan-400">--%</div>
                                        <div id="resp-rate" class="text-xs text-gray-500">-- bpm</div>
                                    </div>
                                </div>
                                
                                <!-- Advanced Metrics -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400">Stress Level</div>
                                        <div id="stress-level" class="text-lg font-bold text-yellow-400">--</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400">Hydration</div>
                                        <div id="hydration" class="text-lg font-bold text-blue-400">--%</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400">Body Temp</div>
                                        <div id="body-temp" class="text-lg font-bold text-orange-400">--°C</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Analysis & Visualization -->
                    <div class="space-y-6">
                        <!-- Psychological Profile (Enhanced) -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🧠</span>
                                Psychological Vector Analysis
                            </h2>
                            <div class="space-y-4">
                                <div class="text-center">
                                    <p class="text-gray-400 mb-4">AI-powered personality vector generation</p>
                                    <button id="start-psych-profile" class="px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition">🧠 Begin Vector Analysis</button>
                                </div>
                                
                                <!-- Personality Dimensions -->
                                <div id="personality-dimensions" class="hidden space-y-3">
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span>Introversion ↔ Extroversion</span>
                                            <span id="intro-extro-score">--</span>
                                        </div>
                                        <div class="w-full bg-gray-700 rounded-full h-2">
                                            <div id="intro-extro-bar" class="bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500" style="width: 50%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span>Intuition ↔ Sensing</span>
                                            <span id="intuition-sensing-score">--</span>
                                        </div>
                                        <div class="w-full bg-gray-700 rounded-full h-2">
                                            <div id="intuition-sensing-bar" class="bg-gradient-to-r from-green-500 to-yellow-500 h-2 rounded-full transition-all duration-500" style="width: 50%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span>Thinking ↔ Feeling</span>
                                            <span id="thinking-feeling-score">--</span>
                                        </div>
                                        <div class="w-full bg-gray-700 rounded-full h-2">
                                            <div id="thinking-feeling-bar" class="bg-gradient-to-r from-red-500 to-pink-500 h-2 rounded-full transition-all duration-500" style="width: 50%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span>Judging ↔ Perceiving</span>
                                            <span id="judging-perceiving-score">--</span>
                                        </div>
                                        <div class="w-full bg-gray-700 rounded-full h-2">
                                            <div id="judging-perceiving-bar" class="bg-gradient-to-r from-orange-500 to-teal-500 h-2 rounded-full transition-all duration-500" style="width: 50%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Vector Summary -->
                                <div id="vector-summary" class="hidden bg-gray-700 p-4 rounded">
                                    <h4 class="font-semibold mb-2">Personality Vector</h4>
                                    <div id="personality-vector" class="text-xs font-mono bg-gray-800 p-2 rounded">[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</div>
                                </div>
                            </div>
                        </div>

                        <!-- Genomic Data (Enhanced) -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🧬</span>
                                Genomic Vector Processing
                            </h2>
                            <div class="space-y-4">
                                <div class="text-center">
                                    <p class="text-gray-400 mb-4">Secure genomic data integration</p>
                                    <div class="flex space-x-2">
                                        <button id="upload-genome" class="flex-1 px-4 py-2 bg-purple-600 rounded hover:bg-purple-700 transition">📁 Upload Data</button>
                                        <button id="generate-synthetic" class="flex-1 px-4 py-2 bg-gray-600 rounded hover:bg-gray-700 transition">🎲 Synthetic</button>
                                    </div>
                                </div>
                                
                                <!-- Genomic Analysis -->
                                <div id="genomic-analysis" class="hidden space-y-3">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div class="bg-gray-700 p-3 rounded text-center">
                                            <div class="text-sm text-gray-400">Risk Factors</div>
                                            <div id="risk-factors" class="text-lg font-bold text-red-400">--</div>
                                        </div>
                                        <div class="bg-gray-700 p-3 rounded text-center">
                                            <div class="text-sm text-gray-400">Traits</div>
                                            <div id="genetic-traits" class="text-lg font-bold text-green-400">--</div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400 mb-2">Genetic Vector</div>
                                        <div id="genetic-vector" class="text-xs font-mono bg-gray-800 p-2 rounded">[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cross-Pollination Analysis -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🔄</span>
                                Cross-Pollination Analysis
                            </h2>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-sm text-gray-400">Physical ↔ Mental</div>
                                        <div id="phys-mental-correlation" class="text-lg font-bold text-blue-400">--%</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-sm text-gray-400">Genetic ↔ Behavioral</div>
                                        <div id="genetic-behavioral-correlation" class="text-lg font-bold text-purple-400">--%</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Combined Vector</div>
                                    <div id="combined-vector" class="text-xs font-mono bg-gray-800 p-2 rounded">[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</div>
                                </div>
                                
                                <button id="generate-avatar" class="w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-purple-700 transition">
                                    🎭 Generate Complete Avatar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="timeline-mastery-page" class="page-content">
        <div class="absolute inset-0 p-8 pt-24 pb-24 flex flex-col items-center justify-center" style="padding-left: 180px;">
            <div class="w-full h-full bg-black/50 backdrop-blur-sm rounded-lg p-8 flex flex-col">
                <h1 class="text-3xl font-bold text-center mb-6">Timeline Mastery</h1>
                
                <!-- Timeline View Selector -->
                <div class="flex justify-between items-center mb-6">
                    <div class="flex space-x-1 bg-gray-700 p-1 rounded-lg">
                        <button class="timeline-period-btn px-3 py-1 text-sm rounded-md hover:bg-gray-600" data-period="weekly">Weekly</button>
                        <button class="timeline-period-btn px-3 py-1 text-sm rounded-md bg-blue-600" data-period="monthly">Monthly</button>
                        <button class="timeline-period-btn px-3 py-1 text-sm rounded-md hover:bg-gray-600" data-period="quarterly">Quarterly</button>
                        <button class="timeline-period-btn px-3 py-1 text-sm rounded-md hover:bg-gray-600" data-period="seasonally">Seasonally</button>
                        <button class="timeline-period-btn px-3 py-1 text-sm rounded-md hover:bg-gray-600" data-period="annually">Annually</button>
                        <button class="timeline-period-btn px-3 py-1 text-sm rounded-md hover:bg-gray-600" data-period="yearly">Yearly</button>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="prev-period" class="px-3 py-1 bg-gray-700 rounded hover:bg-gray-600">‹</button>
                        <span id="current-period-display" class="text-lg font-semibold">January 2024</span>
                        <button id="next-period" class="px-3 py-1 bg-gray-700 rounded hover:bg-gray-600">›</button>
                        <button id="today-btn" class="px-3 py-1 bg-blue-600 rounded hover:bg-blue-700">Today</button>
                        <select id="year-selector" class="px-3 py-1 bg-gray-700 rounded hover:bg-gray-600 text-sm hidden">
                            <!-- Year options will be populated by JavaScript -->
                        </select>
                    </div>
                </div>

                <div id="timeline-main-content" class="flex-grow bg-gray-800 rounded-lg p-4 overflow-hidden">
                    <!-- Gregorian Calendar View -->
                    <div id="gregorian-view" class="timeline-view active">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold">Gregorian Calendar</h2>
                            <div class="flex space-x-2">
                                <button id="add-event-btn" class="px-3 py-1 bg-green-600 rounded hover:bg-green-700 text-sm">+ Add Event</button>
                                <button id="view-events-btn" class="px-3 py-1 bg-blue-600 rounded hover:bg-blue-700 text-sm">View Events</button>
                            </div>
                        </div>
                        
                        <!-- Calendar Grid -->
                        <div class="calendar-container">
                            <div class="calendar-header grid grid-cols-7 gap-1 mb-2">
                                <div class="text-center text-sm font-semibold text-gray-400">Sun</div>
                                <div class="text-center text-sm font-semibold text-gray-400">Mon</div>
                                <div class="text-center text-sm font-semibold text-gray-400">Tue</div>
                                <div class="text-center text-sm font-semibold text-gray-400">Wed</div>
                                <div class="text-center text-sm font-semibold text-gray-400">Thu</div>
                                <div class="text-center text-sm font-semibold text-gray-400">Fri</div>
                                <div class="text-center text-sm font-semibold text-gray-400">Sat</div>
                            </div>
                            <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center"></div>
                        </div>
                    </div>

                    <!-- Lunar Calendar View -->
                    <div id="lunar-view" class="timeline-view">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold">Lunar Calendar</h2>
                            <div class="flex items-center space-x-4">
                                <div class="text-sm">
                                    <span class="text-gray-400">Moon Phase:</span>
                                    <span id="moon-phase" class="ml-2">🌑</span>
                                </div>
                                <div class="text-sm">
                                    <span class="text-gray-400">Lunar Day:</span>
                                    <span id="lunar-day" class="ml-2">1</span>
                                </div>
                            </div>
                        </div>
                        <div class="lunar-calendar-container bg-gray-700 rounded-lg p-4">
                            <div class="lunar-info mb-4">
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                    <div class="bg-gray-600 p-3 rounded">
                                        <div class="text-2xl mb-1">🌑</div>
                                        <div class="text-sm text-gray-400">New Moon</div>
                                        <div class="text-xs" id="new-moon-date">Jan 1</div>
                                    </div>
                                    <div class="bg-gray-600 p-3 rounded">
                                        <div class="text-2xl mb-1">🌓</div>
                                        <div class="text-sm text-gray-400">First Quarter</div>
                                        <div class="text-xs" id="first-quarter-date">Jan 8</div>
                                    </div>
                                    <div class="bg-gray-600 p-3 rounded">
                                        <div class="text-2xl mb-1">🌕</div>
                                        <div class="text-sm text-gray-400">Full Moon</div>
                                        <div class="text-xs" id="full-moon-date">Jan 15</div>
                                    </div>
                                    <div class="bg-gray-600 p-3 rounded">
                                        <div class="text-2xl mb-1">🌗</div>
                                        <div class="text-sm text-gray-400">Last Quarter</div>
                                        <div class="text-xs" id="last-quarter-date">Jan 22</div>
                                    </div>
                                </div>
                            </div>
                            <div id="lunar-calendar-grid" class="grid grid-cols-7 gap-1">
                                <!-- Lunar calendar grid will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Astrology View -->
                    <div id="astrology-view" class="timeline-view">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold">Astrological Calendar</h2>
                            <div class="flex items-center space-x-4">
                                <div class="text-sm">
                                    <span class="text-gray-400">Current Sign:</span>
                                    <span id="current-zodiac" class="ml-2">♈ Aries</span>
                                </div>
                            </div>
                        </div>
                        <div class="astrology-container bg-gray-700 rounded-lg p-4">
                            <!-- Zodiac Wheel -->
                            <div class="zodiac-wheel mb-6">
                                <h3 class="text-lg font-semibold mb-3">Zodiac Wheel</h3>
                                <div class="grid grid-cols-3 md:grid-cols-4 gap-3 h-full">
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="aries">
                                        <div class="text-2xl mb-1">♈</div>
                                        <div class="text-sm">Aries</div>
                                        <div class="text-xs text-gray-400">Mar 21 - Apr 19</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="taurus">
                                        <div class="text-2xl mb-1">♉</div>
                                        <div class="text-sm">Taurus</div>
                                        <div class="text-xs text-gray-400">Apr 20 - May 20</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="gemini">
                                        <div class="text-2xl mb-1">♊</div>
                                        <div class="text-sm">Gemini</div>
                                        <div class="text-xs text-gray-400">May 21 - Jun 20</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="cancer">
                                        <div class="text-2xl mb-1">♋</div>
                                        <div class="text-sm">Cancer</div>
                                        <div class="text-xs text-gray-400">Jun 21 - Jul 22</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="leo">
                                        <div class="text-2xl mb-1">♌</div>
                                        <div class="text-sm">Leo</div>
                                        <div class="text-xs text-gray-400">Jul 23 - Aug 22</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="virgo">
                                        <div class="text-2xl mb-1">♍</div>
                                        <div class="text-sm">Virgo</div>
                                        <div class="text-xs text-gray-400">Aug 23 - Sep 22</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="libra">
                                        <div class="text-2xl mb-1">♎</div>
                                        <div class="text-sm">Libra</div>
                                        <div class="text-xs text-gray-400">Sep 23 - Oct 22</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="scorpio">
                                        <div class="text-2xl mb-1">♏</div>
                                        <div class="text-sm">Scorpio</div>
                                        <div class="text-xs text-gray-400">Oct 23 - Nov 21</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="sagittarius">
                                        <div class="text-2xl mb-1">♐</div>
                                        <div class="text-sm">Sagittarius</div>
                                        <div class="text-xs text-gray-400">Nov 22 - Dec 21</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="capricorn">
                                        <div class="text-2xl mb-1">♑</div>
                                        <div class="text-sm">Capricorn</div>
                                        <div class="text-xs text-gray-400">Dec 22 - Jan 19</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="aquarius">
                                        <div class="text-2xl mb-1">♒</div>
                                        <div class="text-sm">Aquarius</div>
                                        <div class="text-xs text-gray-400">Jan 20 - Feb 18</div>
                                    </div>
                                    <div class="zodiac-sign bg-gray-600 p-3 rounded text-center cursor-pointer hover:bg-gray-500 transition-colors" data-sign="pisces">
                                        <div class="text-2xl mb-1">♓</div>
                                        <div class="text-sm">Pisces</div>
                                        <div class="text-xs text-gray-400">Feb 19 - Mar 20</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Planetary Positions -->
                            <div class="planetary-positions">
                                <h3 class="text-lg font-semibold mb-3">Planetary Positions</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 h-full">
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">☉</div>
                                        <div class="text-sm">Sun</div>
                                        <div class="text-xs text-gray-400" id="sun-sign">Aries</div>
                                    </div>
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">☽</div>
                                        <div class="text-sm">Moon</div>
                                        <div class="text-xs text-gray-400" id="moon-sign">Taurus</div>
                                    </div>
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">☿</div>
                                        <div class="text-sm">Mercury</div>
                                        <div class="text-xs text-gray-400" id="mercury-sign">Aries</div>
                                    </div>
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">♀</div>
                                        <div class="text-sm">Venus</div>
                                        <div class="text-xs text-gray-400" id="venus-sign">Pisces</div>
                                    </div>
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">♂</div>
                                        <div class="text-sm">Mars</div>
                                        <div class="text-xs text-gray-400" id="mars-sign">Aquarius</div>
                                    </div>
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">♃</div>
                                        <div class="text-sm">Jupiter</div>
                                        <div class="text-xs text-gray-400" id="jupiter-sign">Taurus</div>
                                    </div>
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">♄</div>
                                        <div class="text-sm">Saturn</div>
                                        <div class="text-xs text-gray-400" id="saturn-sign">Pisces</div>
                                    </div>
                                    <div class="planet-info bg-gray-600 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">♅</div>
                                        <div class="text-sm">Uranus</div>
                                        <div class="text-xs text-gray-400" id="uranus-sign">Taurus</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Milestones View -->
                    <div id="milestones-view" class="timeline-view">
                        <h2 class="text-xl font-semibold mb-4">Life Milestones</h2>
                        <div class="space-y-6">
                            <!-- Birth Information -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="font-semibold mb-3">Birth Information</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">Birthplace</label>
                                        <input type="text" id="birthplace" placeholder="Enter birthplace" class="bg-gray-600 p-2 rounded w-full">
                                    </div>
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">Birth Date</label>
                                        <input type="date" id="birthdate" class="bg-gray-600 p-2 rounded w-full">
                                    </div>
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">Birth Time</label>
                                        <input type="time" id="birthtime" class="bg-gray-600 p-2 rounded w-full">
                                    </div>
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">Zodiac Sign</label>
                                        <select id="zodiac-sign" class="bg-gray-600 p-2 rounded w-full">
                                            <option value="">Select sign</option>
                                            <option value="aries">♈ Aries</option>
                                            <option value="taurus">♉ Taurus</option>
                                            <option value="gemini">♊ Gemini</option>
                                            <option value="cancer">♋ Cancer</option>
                                            <option value="leo">♌ Leo</option>
                                            <option value="virgo">♍ Virgo</option>
                                            <option value="libra">♎ Libra</option>
                                            <option value="scorpio">♏ Scorpio</option>
                                            <option value="sagittarius">♐ Sagittarius</option>
                                            <option value="capricorn">♑ Capricorn</option>
                                            <option value="aquarius">♒ Aquarius</option>
                                            <option value="pisces">♓ Pisces</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Life Counters -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="font-semibold mb-3">Life Statistics</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-blue-400" id="days-since">0</div>
                                        <div class="text-sm text-gray-400">Days Since Birth</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-green-400" id="years-since">0</div>
                                        <div class="text-sm text-gray-400">Years Old</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-purple-400" id="weeks-since">0</div>
                                        <div class="text-sm text-gray-400">Weeks Lived</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-yellow-400" id="heartbeats">0</div>
                                        <div class="text-sm text-gray-400">Heartbeats (est.)</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Important Dates -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="font-semibold mb-3">Important Dates</h3>
                                <div class="space-y-3">
                                    <div id="important-dates-list">
                                        <!-- Important dates will be populated by JavaScript -->
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <input type="date" id="important-date-input" class="bg-gray-600 p-2 rounded flex-1">
                                        <input type="text" id="important-date-description" placeholder="Event description" class="bg-gray-600 p-2 rounded flex-1">
                                        <button id="add-important-date" class="px-3 py-2 bg-green-600 rounded hover:bg-green-700">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Countdowns View -->
                    <div id="countdowns-view" class="timeline-view">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold">Countdown Timers</h2>
                            <button id="add-countdown-btn" class="px-3 py-1 bg-green-600 rounded hover:bg-green-700 text-sm">+ Add Countdown</button>
                        </div>
                        
                        <!-- Add Countdown Modal -->
                        <div id="countdown-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div class="bg-gray-800 p-6 rounded-lg max-w-md w-full mx-4">
                                <h3 class="text-lg font-semibold mb-4">Add New Countdown</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">Event Title</label>
                                        <input type="text" id="countdown-title" placeholder="Enter event title" class="bg-gray-700 p-2 rounded w-full">
                                    </div>
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">Target Date</label>
                                        <input type="date" id="countdown-date" class="bg-gray-700 p-2 rounded w-full">
                                    </div>
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">Color</label>
                                        <select id="countdown-color" class="bg-gray-700 p-2 rounded w-full">
                                            <option value="blue">Blue</option>
                                            <option value="red">Red</option>
                                            <option value="green">Green</option>
                                            <option value="yellow">Yellow</option>
                                            <option value="purple">Purple</option>
                                            <option value="pink">Pink</option>
                                            <option value="orange">Orange</option>
                                            <option value="teal">Teal</option>
                                        </select>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button id="save-countdown" class="flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700">Save</button>
                                        <button id="cancel-countdown" class="flex-1 px-4 py-2 bg-gray-600 rounded hover:bg-gray-700">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="countdowns-list" class="space-y-4">
                            <!-- Countdowns will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- To-Do List View -->
                    <div id="todo-view" class="timeline-view">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold">To-Do List</h2>
                            <button id="add-todo-btn" class="px-3 py-1 bg-green-600 rounded hover:bg-green-700 text-sm">+ Add Task</button>
                        </div>
                        <div class="space-y-4">
                            <!-- Task Input -->
                            <div class="flex space-x-2">
                                <input type="text" id="new-todo" placeholder="Enter a new task..." class="flex-1 bg-gray-700 p-2 rounded">
                                <input type="date" id="todo-date" class="bg-gray-700 p-2 rounded">
                                <button id="add-todo-submit" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Add</button>
                            </div>
                            
                            <!-- Todo Lists -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h3 class="font-semibold mb-3 text-green-400">Today</h3>
                                    <div id="today-todos" class="space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" class="rounded">
                                            <span class="flex-1">Complete project proposal</span>
                                            <button class="text-red-400 hover:text-red-300">×</button>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" class="rounded">
                                            <span class="flex-1">Call client</span>
                                            <button class="text-red-400 hover:text-red-300">×</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h3 class="font-semibold mb-3 text-yellow-400">This Week</h3>
                                    <div id="week-todos" class="space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" class="rounded">
                                            <span class="flex-1">Review quarterly reports</span>
                                            <button class="text-red-400 hover:text-red-300">×</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h3 class="font-semibold mb-3 text-blue-400">This Month</h3>
                                    <div id="month-todos" class="space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" class="rounded">
                                            <span class="flex-1">Plan vacation</span>
                                            <button class="text-red-400 hover:text-red-300">×</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Import View -->
                    <div id="import-view" class="timeline-view">
                        <h2 class="text-xl font-semibold mb-4">Import Calendar Data</h2>
                        <div class="space-y-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="font-semibold mb-3">Import .ics File</h3>
                                <div class="border-2 border-dashed border-gray-600 rounded-lg p-6 text-center">
                                    <div class="text-4xl mb-4">📅</div>
                                    <p class="text-gray-400 mb-4">Drag and drop your .ics file here or click to browse</p>
                                    <input type="file" id="ics-file-input" accept=".ics" class="hidden">
                                    <button id="browse-ics-btn" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Browse Files</button>
                                </div>
                            </div>
                            
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="font-semibold mb-3">Export Calendar</h3>
                                <div class="flex space-x-4">
                                    <button class="px-4 py-2 bg-green-600 rounded hover:bg-green-700">Export as .ics</button>
                                    <button class="px-4 py-2 bg-purple-600 rounded hover:bg-purple-700">Export as JSON</button>
                                    <button class="px-4 py-2 bg-yellow-600 rounded hover:bg-yellow-700">Print Calendar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Modal -->
        <div id="event-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
            <div class="bg-gray-800 rounded-lg p-6 w-full max-w-md">
                <h3 class="text-xl font-semibold mb-4">Add Event</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Event Title</label>
                        <input type="text" id="event-title" class="bg-gray-700 p-2 rounded w-full">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-1">Start Date</label>
                            <input type="date" id="event-start-date" class="bg-gray-700 p-2 rounded w-full">
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-1">End Date</label>
                            <input type="date" id="event-end-date" class="bg-gray-700 p-2 rounded w-full">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Description</label>
                        <textarea id="event-description" rows="3" class="bg-gray-700 p-2 rounded w-full"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Color</label>
                        <select id="event-color" class="bg-gray-700 p-2 rounded w-full">
                            <option value="blue">Blue</option>
                            <option value="red">Red</option>
                            <option value="green">Green</option>
                            <option value="yellow">Yellow</option>
                            <option value="purple">Purple</option>
                            <option value="orange">Orange</option>
                        </select>
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button id="save-event" class="flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700">Save Event</button>
                        <button id="cancel-event" class="flex-1 px-4 py-2 bg-gray-600 rounded hover:bg-gray-700">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline Controls -->
        <div id="timeline-controls" class="fixed bottom-4 left-1/2 -translate-x-1/2 z-20 bg-black/50 backdrop-blur-sm p-3 rounded-full flex items-center justify-center gap-2">
            <button data-view="gregorian-view" class="timeline-btn tooltip h-12 w-12 flex items-center justify-center bg-gray-700 rounded-full hover:bg-gray-600 transition active"><span class="tooltip-text">Gregorian</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button>
            <button data-view="lunar-view" class="timeline-btn tooltip h-12 w-12 flex items-center justify-center bg-gray-700 rounded-full hover:bg-gray-600 transition"><span class="tooltip-text">Lunar</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg></button>
            <button data-view="astrology-view" class="timeline-btn tooltip h-12 w-12 flex items-center justify-center bg-gray-700 rounded-full hover:bg-gray-600 transition"><span class="tooltip-text">Astrology</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-12v4m-2-2h4m5 6l-3 3m0 0l-3-3m3 3V10m0 11a9 9 0 110-18 9 9 0 010 18z"></path></svg></button>
            <button data-view="milestones-view" class="timeline-btn tooltip h-12 w-12 flex items-center justify-center bg-gray-700 rounded-full hover:bg-gray-600 transition"><span class="tooltip-text">Milestones</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"></path></svg></button>
            <button data-view="countdowns-view" class="timeline-btn tooltip h-12 w-12 flex items-center justify-center bg-gray-700 rounded-full hover:bg-gray-600 transition"><span class="tooltip-text">Countdowns</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button>
            <button data-view="todo-view" class="timeline-btn tooltip h-12 w-12 flex items-center justify-center bg-gray-700 rounded-full hover:bg-gray-600 transition"><span class="tooltip-text">To-Do List</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg></button>
            <button data-view="import-view" class="timeline-btn tooltip h-12 w-12 flex items-center justify-center bg-gray-700 rounded-full hover:bg-gray-600 transition"><span class="tooltip-text">Import .ics</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg></button>
        </div>
    </div>
    <div id="memory-palace-page" class="page-content">
        <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-full max-w-6xl h-[90vh] bg-black/50 backdrop-blur-sm rounded-lg p-8 overflow-y-auto">
                <h1 class="text-3xl font-bold text-center mb-6">Memory Palace</h1>
                
                <!-- Memory Processing Status -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-400">Memory Processing</span>
                        <span id="memory-status" class="text-sm font-semibold text-green-400">Ready</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="memory-progress" class="bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Left Column: Input & Capture -->
                    <div class="space-y-6">
                        <!-- Multi-Modal Input -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📸</span>
                                Multi-Modal Memory Capture
                            </h2>
                            
                            <!-- Image Capture -->
                            <div class="space-y-4">
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h3 class="font-semibold mb-3 flex items-center">
                                        <span class="mr-2">🖼️</span>
                                        Visual Memory
                                    </h3>
                                    <div class="flex items-center gap-4 mb-4">
                                        <button id="capture-image" class="flex-1 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition">📷 Capture</button>
                                        <label class="flex-1 px-4 py-2 bg-gray-600 rounded hover:bg-gray-700 transition cursor-pointer text-center">
                                            <span>📁 Upload</span>
                                            <input type="file" id="image-input" class="hidden" accept="image/*">
                                        </label>
                                    </div>
                                    <div id="image-preview" class="h-32 bg-gray-600 rounded flex items-center justify-center text-gray-400">
                                        <div class="text-center">
                                            <div class="text-2xl mb-2">🖼️</div>
                                            <div class="text-sm">Image Preview</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Audio Capture -->
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h3 class="font-semibold mb-3 flex items-center">
                                        <span class="mr-2">🎵</span>
                                        Audio Memory
                                    </h3>
                                    <div class="flex items-center gap-4 mb-4">
                                        <button id="record-audio" class="flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 transition">🎤 Record</button>
                                        <label class="flex-1 px-4 py-2 bg-gray-600 rounded hover:bg-gray-700 transition cursor-pointer text-center">
                                            <span>📁 Upload</span>
                                            <input type="file" id="audio-input" class="hidden" accept="audio/*">
                                        </label>
                                    </div>
                                    <div id="audio-player" class="h-16 bg-gray-600 rounded flex items-center justify-center text-gray-400">
                                        <div class="text-center">
                                            <div class="text-lg mb-1">🎵</div>
                                            <div class="text-xs">Audio Player</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Video Capture -->
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h3 class="font-semibold mb-3 flex items-center">
                                        <span class="mr-2">🎬</span>
                                        Video Memory
                                    </h3>
                                    <div class="flex items-center gap-4 mb-4">
                                        <button id="record-video" class="flex-1 px-4 py-2 bg-red-600 rounded hover:bg-red-700 transition">🎥 Record</button>
                                        <label class="flex-1 px-4 py-2 bg-gray-600 rounded hover:bg-gray-700 transition cursor-pointer text-center">
                                            <span>📁 Upload</span>
                                            <input type="file" id="video-input" class="hidden" accept="video/*">
                                        </label>
                                    </div>
                                    <div id="video-preview" class="h-32 bg-gray-600 rounded flex items-center justify-center text-gray-400">
                                        <div class="text-center">
                                            <div class="text-2xl mb-2">🎬</div>
                                            <div class="text-sm">Video Preview</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Text Memory -->
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h3 class="font-semibold mb-3 flex items-center">
                                        <span class="mr-2">📝</span>
                                        Text Memory
                                    </h3>
                                    <textarea id="text-memory" placeholder="Describe your memory, thoughts, or experience..." class="w-full bg-gray-600 p-3 rounded border border-gray-500 h-24 resize-none"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Context & Metadata -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📍</span>
                                Context & Metadata
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Location</label>
                                    <input type="text" id="memory-location" placeholder="GPS coordinates or place name" class="bg-gray-700 border border-gray-600 rounded p-2 w-full">
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Timestamp</label>
                                    <input type="datetime-local" id="memory-timestamp" class="bg-gray-700 border border-gray-600 rounded p-2 w-full">
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Emotional State</label>
                                    <select id="memory-emotion" class="bg-gray-700 border border-gray-600 rounded p-2 w-full">
                                        <option value="">Select emotion</option>
                                        <option value="joy">😊 Joy</option>
                                        <option value="sadness">😢 Sadness</option>
                                        <option value="anger">😠 Anger</option>
                                        <option value="fear">😨 Fear</option>
                                        <option value="surprise">😲 Surprise</option>
                                        <option value="disgust">🤢 Disgust</option>
                                        <option value="neutral">😐 Neutral</option>
                                    </select>
                                </div>
                                <div class="space-y-2">
                                    <label class="block text-sm text-gray-400">Memory Type</label>
                                    <select id="memory-type" class="bg-gray-700 border border-gray-600 rounded p-2 w-full">
                                        <option value="">Select type</option>
                                        <option value="episodic">📅 Episodic</option>
                                        <option value="semantic">📚 Semantic</option>
                                        <option value="procedural">⚙️ Procedural</option>
                                        <option value="emotional">💝 Emotional</option>
                                        <option value="spatial">🗺️ Spatial</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Processing & Analysis -->
                    <div class="space-y-6">
                        <!-- AI Processing -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🤖</span>
                                AI Memory Processing
                            </h2>
                            <div class="space-y-4">
                                <div class="text-center">
                                    <button id="process-memory" class="px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition">
                                        🧠 Process Memory
                                    </button>
                                </div>
                                
                                <!-- Processing Results -->
                                <div id="processing-results" class="hidden space-y-4">
                                    <!-- Visual Analysis -->
                                    <div class="bg-gray-700 p-4 rounded">
                                        <h4 class="font-semibold mb-2 flex items-center">
                                            <span class="mr-2">👁️</span>
                                            Visual Analysis
                                        </h4>
                                        <div id="visual-analysis" class="text-sm space-y-2">
                                            <div class="flex justify-between">
                                                <span>Objects Detected:</span>
                                                <span id="objects-detected">--</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Scene Type:</span>
                                                <span id="scene-type">--</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Color Palette:</span>
                                                <span id="color-palette">--</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Audio Analysis -->
                                    <div class="bg-gray-700 p-4 rounded">
                                        <h4 class="font-semibold mb-2 flex items-center">
                                            <span class="mr-2">🎵</span>
                                            Audio Analysis
                                        </h4>
                                        <div id="audio-analysis" class="text-sm space-y-2">
                                            <div class="flex justify-between">
                                                <span>Speech Detected:</span>
                                                <span id="speech-detected">--</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Music Genre:</span>
                                                <span id="music-genre">--</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Emotion in Voice:</span>
                                                <span id="voice-emotion">--</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Text Analysis -->
                                    <div class="bg-gray-700 p-4 rounded">
                                        <h4 class="font-semibold mb-2 flex items-center">
                                            <span class="mr-2">📝</span>
                                            Text Analysis
                                        </h4>
                                        <div id="text-analysis" class="text-sm space-y-2">
                                            <div class="flex justify-between">
                                                <span>Sentiment:</span>
                                                <span id="text-sentiment">--</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Key Topics:</span>
                                                <span id="key-topics">--</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Language:</span>
                                                <span id="language-detected">--</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Vector Generation -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🧮</span>
                                Memory Vector Generation
                            </h2>
                            <div class="space-y-4">
                                <div id="vector-display" class="hidden space-y-3">
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400 mb-2">Visual Vector</div>
                                        <div id="visual-vector" class="text-xs font-mono bg-gray-800 p-2 rounded">[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</div>
                                    </div>
                                    
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400 mb-2">Audio Vector</div>
                                        <div id="audio-vector" class="text-xs font-mono bg-gray-800 p-2 rounded">[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</div>
                                    </div>
                                    
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400 mb-2">Text Vector</div>
                                        <div id="text-vector" class="text-xs font-mono bg-gray-800 p-2 rounded">[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</div>
                                    </div>
                                    
                                    <div class="bg-gray-700 p-3 rounded">
                                        <div class="text-sm text-gray-400 mb-2">Combined Memory Vector</div>
                                        <div id="combined-memory-vector" class="text-xs font-mono bg-gray-800 p-2 rounded">[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</div>
                                    </div>
                                </div>
                                
                                <button id="generate-vectors" class="w-full px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition">
                                    🧮 Generate Vectors
                                </button>
                            </div>
                        </div>

                        <!-- Memory Storage & Retrieval -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">💾</span>
                                Memory Storage & Retrieval
                            </h2>
                            <div class="space-y-4">
                                <div class="flex space-x-2">
                                    <button id="save-memory" class="flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 transition">💾 Save Memory</button>
                                    <button id="retrieve-memories" class="flex-1 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition">🔍 Retrieve</button>
                                </div>
                                
                                <div id="memory-stats" class="grid grid-cols-2 gap-4">
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-blue-400" id="total-memories">0</div>
                                        <div class="text-sm text-gray-400">Total Memories</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-green-400" id="vector-space">0</div>
                                        <div class="text-sm text-gray-400">Vector Space</div>
                                    </div>
                                </div>
                                
                                <!-- Memory Search -->
                                <div class="bg-gray-700 p-4 rounded">
                                    <h4 class="font-semibold mb-2">Memory Search</h4>
                                    <div class="space-y-2">
                                        <input type="text" id="memory-search" placeholder="Search memories by content, emotion, or location..." class="w-full bg-gray-600 p-2 rounded border border-gray-500">
                                        <button id="search-memories" class="w-full px-4 py-2 bg-purple-600 rounded hover:bg-purple-700 transition">🔍 Search</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="social-media-page" class="page-content">
        <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-full max-w-7xl h-[90vh] bg-black/50 backdrop-blur-sm rounded-lg p-8 overflow-y-auto">
                <h1 class="text-3xl font-bold text-center mb-6">Social Media Intelligence</h1>
                
                <!-- Social Network Status -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-400">Network Analysis</span>
                        <span id="network-status" class="text-sm font-semibold text-green-400">Connected</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="network-progress" class="bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-300" style="width: 75%"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Left Column: Platform Integration -->
                    <div class="space-y-6">
                        <!-- Platform Connections -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🔗</span>
                                Platform Integration
                            </h2>
                            <div class="space-y-4">
                                <div class="bg-gray-700 p-4 rounded flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🐦</span>
                                        <div>
                                            <div class="font-semibold">Twitter/X</div>
                                            <div class="text-sm text-gray-400">@username</div>
                                        </div>
                                    </div>
                                    <button class="px-3 py-1 bg-blue-600 rounded hover:bg-blue-700 transition text-sm">Connect</button>
                                </div>
                                
                                <div class="bg-gray-700 p-4 rounded flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">📘</span>
                                        <div>
                                            <div class="font-semibold">Facebook</div>
                                            <div class="text-sm text-gray-400">facebook.com/username</div>
                                        </div>
                                    </div>
                                    <button class="px-3 py-1 bg-blue-600 rounded hover:bg-blue-700 transition text-sm">Connect</button>
                                </div>
                                
                                <div class="bg-gray-700 p-4 rounded flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">📷</span>
                                        <div>
                                            <div class="font-semibold">Instagram</div>
                                            <div class="text-sm text-gray-400">@username</div>
                                        </div>
                                    </div>
                                    <button class="px-3 py-1 bg-blue-600 rounded hover:bg-blue-700 transition text-sm">Connect</button>
                                </div>
                                
                                <div class="bg-gray-700 p-4 rounded flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">💼</span>
                                        <div>
                                            <div class="font-semibold">LinkedIn</div>
                                            <div class="text-sm text-gray-400">linkedin.com/in/username</div>
                                        </div>
                                    </div>
                                    <button class="px-3 py-1 bg-blue-600 rounded hover:bg-blue-700 transition text-sm">Connect</button>
                                </div>
                                
                                <div class="bg-gray-700 p-4 rounded flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🎵</span>
                                        <div>
                                            <div class="font-semibold">TikTok</div>
                                            <div class="text-sm text-gray-400">@username</div>
                                        </div>
                                    </div>
                                    <button class="px-3 py-1 bg-blue-600 rounded hover:bg-blue-700 transition text-sm">Connect</button>
                                </div>
                            </div>
                        </div>

                        <!-- Data Collection Settings -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">⚙️</span>
                                Data Collection
                            </h2>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Real-time Monitoring</span>
                                    <label class="switch">
                                        <input type="checkbox" id="real-time-monitoring" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Sentiment Analysis</span>
                                    <label class="switch">
                                        <input type="checkbox" id="sentiment-analysis" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Network Mapping</span>
                                    <label class="switch">
                                        <input type="checkbox" id="network-mapping" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Content Classification</span>
                                    <label class="switch">
                                        <input type="checkbox" id="content-classification" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Center Column: Analytics Dashboard -->
                    <div class="space-y-6">
                        <!-- Engagement Metrics -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📊</span>
                                Engagement Analytics
                            </h2>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-gray-700 p-4 rounded text-center">
                                    <div class="text-2xl font-bold text-blue-400" id="total-followers">12.5K</div>
                                    <div class="text-sm text-gray-400">Total Followers</div>
                                    <div class="text-xs text-green-400 mt-1">↗️ +2.3%</div>
                                </div>
                                <div class="bg-gray-700 p-4 rounded text-center">
                                    <div class="text-2xl font-bold text-green-400" id="engagement-rate">4.7%</div>
                                    <div class="text-sm text-gray-400">Engagement Rate</div>
                                    <div class="text-xs text-green-400 mt-1">↗️ +0.8%</div>
                                </div>
                                <div class="bg-gray-700 p-4 rounded text-center">
                                    <div class="text-2xl font-bold text-purple-400" id="reach">89.2K</div>
                                    <div class="text-sm text-gray-400">Total Reach</div>
                                    <div class="text-xs text-green-400 mt-1">↗️ +12.1%</div>
                                </div>
                                <div class="bg-gray-700 p-4 rounded text-center">
                                    <div class="text-2xl font-bold text-orange-400" id="impressions">156.8K</div>
                                    <div class="text-sm text-gray-400">Impressions</div>
                                    <div class="text-xs text-green-400 mt-1">↗️ +8.5%</div>
                                </div>
                            </div>
                        </div>

                        <!-- Sentiment Analysis -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">😊</span>
                                Sentiment Analysis
                            </h2>
                            <div class="space-y-4">
                                <div class="grid grid-cols-3 gap-4">
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">😊</div>
                                        <div class="text-lg font-bold text-green-400" id="positive-sentiment">68%</div>
                                        <div class="text-xs text-gray-400">Positive</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">😐</div>
                                        <div class="text-lg font-bold text-yellow-400" id="neutral-sentiment">24%</div>
                                        <div class="text-xs text-gray-400">Neutral</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl mb-1">😞</div>
                                        <div class="text-lg font-bold text-red-400" id="negative-sentiment">8%</div>
                                        <div class="text-xs text-gray-400">Negative</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Sentiment Trend (7 days)</div>
                                    <div id="sentiment-chart" class="h-20 bg-gray-800 rounded flex items-end justify-between px-2">
                                        <div class="w-3 bg-green-500 rounded-t" style="height: 60%"></div>
                                        <div class="w-3 bg-green-500 rounded-t" style="height: 75%"></div>
                                        <div class="w-3 bg-yellow-500 rounded-t" style="height: 45%"></div>
                                        <div class="w-3 bg-green-500 rounded-t" style="height: 80%"></div>
                                        <div class="w-3 bg-green-500 rounded-t" style="height: 65%"></div>
                                        <div class="w-3 bg-green-500 rounded-t" style="height: 70%"></div>
                                        <div class="w-3 bg-green-500 rounded-t" style="height: 68%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Content Performance -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📈</span>
                                Content Performance
                            </h2>
                            <div class="space-y-3">
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">Top Performing Post</span>
                                        <span class="text-xs text-gray-400">2 days ago</span>
                                    </div>
                                    <div class="text-sm mt-1">"Just launched our new AI-powered feature! 🚀"</div>
                                    <div class="flex justify-between text-xs text-gray-400 mt-2">
                                        <span>❤️ 1.2K likes</span>
                                        <span>💬 89 comments</span>
                                        <span>🔄 234 shares</span>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">Viral Content</span>
                                        <span class="text-xs text-gray-400">5 days ago</span>
                                    </div>
                                    <div class="text-sm mt-1">"Behind the scenes: How we built this..."</div>
                                    <div class="flex justify-between text-xs text-gray-400 mt-2">
                                        <span>❤️ 3.4K likes</span>
                                        <span>💬 156 comments</span>
                                        <span>🔄 567 shares</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Network Analysis -->
                    <div class="space-y-6">
                        <!-- Network Map -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🕸️</span>
                                Network Analysis
                            </h2>
                            <div class="space-y-4">
                                <div class="bg-gray-700 p-4 rounded text-center">
                                    <div class="text-2xl mb-2">🕸️</div>
                                    <div class="text-sm text-gray-400 mb-2">Social Network Map</div>
                                    <div class="h-32 bg-gray-800 rounded flex items-center justify-center">
                                        <div class="text-center text-gray-400">
                                            <div class="text-lg mb-1">🕸️</div>
                                            <div class="text-xs">Interactive Network</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-lg font-bold text-blue-400" id="network-size">847</div>
                                        <div class="text-xs text-gray-400">Network Size</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-lg font-bold text-green-400" id="influence-score">7.8</div>
                                        <div class="text-xs text-gray-400">Influence Score</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Audience Insights -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">👥</span>
                                Audience Insights
                            </h2>
                            <div class="space-y-4">
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Demographics</div>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span>Age 18-24:</span>
                                            <span class="text-blue-400">32%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Age 25-34:</span>
                                            <span class="text-blue-400">45%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Age 35-44:</span>
                                            <span class="text-blue-400">18%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Age 45+:</span>
                                            <span class="text-blue-400">5%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Top Interests</div>
                                    <div class="space-y-1 text-sm">
                                        <div class="flex justify-between">
                                            <span>Technology:</span>
                                            <span class="text-green-400">78%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>AI/ML:</span>
                                            <span class="text-green-400">65%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Innovation:</span>
                                            <span class="text-green-400">52%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Startups:</span>
                                            <span class="text-green-400">41%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Predictive Analytics -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🔮</span>
                                Predictive Analytics
                            </h2>
                            <div class="space-y-4">
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Growth Prediction</div>
                                    <div class="text-lg font-bold text-green-400">+15.3%</div>
                                    <div class="text-xs text-gray-400">Next 30 days</div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Optimal Posting Time</div>
                                    <div class="text-lg font-bold text-blue-400">2:30 PM</div>
                                    <div class="text-xs text-gray-400">Tuesday-Thursday</div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Content Recommendation</div>
                                    <div class="text-sm">Video content performs 2.3x better</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="algorithm-settings-page" class="page-content">
        <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-full max-w-7xl h-[90vh] bg-black/50 backdrop-blur-sm rounded-lg p-8 overflow-y-auto">
                <h1 class="text-3xl font-bold text-center mb-6">Algorithm Marketplace & Tuning</h1>
                
                <!-- System Status -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-400">System Status</span>
                        <div class="flex items-center space-x-4">
                            <span class="text-sm text-green-400">🟢 Cloud Connected</span>
                            <span class="text-sm text-blue-400">🟢 IoT Edge Active</span>
                            <span class="text-sm text-purple-400">🟢 AI Engine Running</span>
                        </div>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="system-progress" class="bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300" style="width: 92%"></div>
                    </div>
                </div>

                <!-- Algorithm Categories Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Biometrics & Recognition -->
                    <div class="bg-gray-800 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                            <span class="mr-2">👁️</span>
                            Biometrics & Recognition
                        </h2>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">👤</span>
                                    <div>
                                        <div class="font-semibold">Face Recognition</div>
                                        <div class="text-sm text-gray-400">Real-time biometric analysis</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">🎭</span>
                                    <div>
                                        <div class="font-semibold">Emotion Detection</div>
                                        <div class="text-sm text-gray-400">Facial expression analysis</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">👋</span>
                                    <div>
                                        <div class="font-semibold">Gesture Recognition</div>
                                        <div class="text-sm text-gray-400">Hand and body tracking</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-yellow-600 px-2 py-1 rounded">Available</span>
                                    <button class="text-green-400 hover:text-green-300">📥</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">🎵</span>
                                    <div>
                                        <div class="font-semibold">Voice Recognition</div>
                                        <div class="text-sm text-gray-400">Speech pattern analysis</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sentiment & Social -->
                    <div class="bg-gray-800 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                            <span class="mr-2">😊</span>
                            Sentiment & Social
                        </h2>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">📊</span>
                                    <div>
                                        <div class="font-semibold">Sentiment Analysis</div>
                                        <div class="text-sm text-gray-400">Real-time mood tracking</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">👥</span>
                                    <div>
                                        <div class="font-semibold">Team Dynamics</div>
                                        <div class="text-sm text-gray-400">Group interaction analysis</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">🗺️</span>
                                    <div>
                                        <div class="font-semibold">Location Analytics</div>
                                        <div class="text-sm text-gray-400">GPS-based insights</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">📈</span>
                                    <div>
                                        <div class="font-semibold">Progress Tracking</div>
                                        <div class="text-sm text-gray-400">Goal achievement metrics</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-yellow-600 px-2 py-1 rounded">Available</span>
                                    <button class="text-green-400 hover:text-green-300">📥</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- IoT & Smart Systems -->
                    <div class="bg-gray-800 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                            <span class="mr-2">🏠</span>
                            IoT & Smart Systems
                        </h2>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">🏠</span>
                                    <div>
                                        <div class="font-semibold">Smart Home</div>
                                        <div class="text-sm text-gray-400">IoT device integration</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">🤖</span>
                                    <div>
                                        <div class="font-semibold">AI Assistant</div>
                                        <div class="text-sm text-gray-400">Conversational AI</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">🎨</span>
                                    <div>
                                        <div class="font-semibold">Creative AI</div>
                                        <div class="text-sm text-gray-400">Art and design generation</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-yellow-600 px-2 py-1 rounded">Available</span>
                                    <button class="text-green-400 hover:text-green-300">📥</button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-700 rounded hover:bg-gray-600 transition cursor-pointer">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">♿</span>
                                    <div>
                                        <div class="font-semibold">Accessibility</div>
                                        <div class="text-sm text-gray-400">Inclusive design tools</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs bg-green-600 px-2 py-1 rounded">Installed</span>
                                    <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Algorithm Tuning -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Algorithm Configuration -->
                    <div class="space-y-6">
                        <!-- Selected Algorithm Settings -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">⚙️</span>
                                Algorithm Tuning
                            </h2>
                            <div id="algorithm-settings" class="space-y-4">
                                <div class="text-center text-gray-400 py-8">
                                    <div class="text-lg mb-2">🎯</div>
                                    <div class="text-sm">Select an algorithm to configure</div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Metrics -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📊</span>
                                Performance Metrics
                            </h2>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-green-400">98.7%</div>
                                        <div class="text-sm text-gray-400">Accuracy</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-blue-400">12ms</div>
                                        <div class="text-sm text-gray-400">Latency</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-purple-400">1.2M</div>
                                        <div class="text-sm text-gray-400">Requests/min</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-orange-400">99.9%</div>
                                        <div class="text-sm text-gray-400">Uptime</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Resource Usage</div>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span>CPU:</span>
                                            <span class="text-green-400">23%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Memory:</span>
                                            <span class="text-blue-400">45%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>GPU:</span>
                                            <span class="text-purple-400">67%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Network:</span>
                                            <span class="text-orange-400">12%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cloud & Edge Integration -->
                    <div class="space-y-6">
                        <!-- Cloud Deployment -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">☁️</span>
                                Cloud & Edge Deployment
                            </h2>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">☁️</span>
                                        <div>
                                            <div class="font-semibold">Cloud Processing</div>
                                            <div class="text-sm text-gray-400">Heavy computation tasks</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs bg-green-600 px-2 py-1 rounded">Active</span>
                                        <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🔗</span>
                                        <div>
                                            <div class="font-semibold">Edge Computing</div>
                                            <div class="text-sm text-gray-400">Local device processing</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs bg-green-600 px-2 py-1 rounded">Active</span>
                                        <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🔄</span>
                                        <div>
                                            <div class="font-semibold">Hybrid Sync</div>
                                            <div class="text-sm text-gray-400">Cloud-edge synchronization</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs bg-green-600 px-2 py-1 rounded">Active</span>
                                        <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🔒</span>
                                        <div>
                                            <div class="font-semibold">Security Layer</div>
                                            <div class="text-sm text-gray-400">Encryption & authentication</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs bg-green-600 px-2 py-1 rounded">Active</span>
                                        <button class="text-blue-400 hover:text-blue-300">⚙️</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Algorithm Marketplace -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🛒</span>
                                Algorithm Marketplace
                            </h2>
                            <div class="space-y-4">
                                <div class="flex space-x-2">
                                    <input type="text" placeholder="Search algorithms..." class="flex-1 bg-gray-700 p-2 rounded border border-gray-600">
                                    <button class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition">🔍</button>
                                </div>
                                
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between p-2 bg-gray-700 rounded">
                                        <span class="text-sm">Advanced NLP</span>
                                        <button class="text-green-400 hover:text-green-300 text-sm">📥 Install</button>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-700 rounded">
                                        <span class="text-sm">Computer Vision Pro</span>
                                        <button class="text-green-400 hover:text-green-300 text-sm">📥 Install</button>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-700 rounded">
                                        <span class="text-sm">Predictive Analytics</span>
                                        <button class="text-green-400 hover:text-green-300 text-sm">📥 Install</button>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-700 rounded">
                                        <span class="text-sm">Quantum ML</span>
                                        <button class="text-green-400 hover:text-green-300 text-sm">📥 Install</button>
                                    </div>
                                </div>
                                
                                <button class="w-full px-4 py-2 bg-purple-600 rounded hover:bg-purple-700 transition">
                                    🛒 Browse Full Marketplace
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mt-8 flex justify-center space-x-4">
                    <button id="deploy-algorithms" class="px-8 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition">
                        🚀 Deploy All
                    </button>
                    <button id="optimize-system" class="px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition">
                        ⚡ Optimize System
                    </button>
                    <button id="backup-config" class="px-8 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition">
                        💾 Backup Config
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="file-storage-page" class="page-content">
        <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-full max-w-7xl h-[90vh] bg-black/50 backdrop-blur-sm rounded-lg p-8 overflow-y-auto">
                <h1 class="text-3xl font-bold text-center mb-6">Intelligent File Storage</h1>
                
                <!-- Storage Status -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-400">Storage & Processing Status</span>
                        <span id="storage-status" class="text-sm font-semibold text-green-400">Active</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="storage-progress" class="bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-300" style="width: 65%"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Left Column: Upload & Processing -->
                    <div class="space-y-6">
                        <!-- File Upload Zone -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📁</span>
                                Intelligent File Upload
                            </h2>
                            <div class="space-y-4">
                                <div class="border-2 border-dashed border-gray-600 rounded-lg p-8 text-center hover:border-gray-500 transition-colors">
                                    <div class="text-4xl mb-4">📁</div>
                                    <p class="text-gray-400 mb-4">Drag & Drop Files Here or Click to Browse</p>
                                    <input type="file" id="file-upload" multiple class="hidden">
                                    <button id="browse-files" class="px-6 py-3 bg-blue-600 rounded hover:bg-blue-700 transition">Browse Files</button>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-blue-400" id="total-files">0</div>
                                        <div class="text-sm text-gray-400">Total Files</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-2xl font-bold text-green-400" id="processed-files">0</div>
                                        <div class="text-sm text-gray-400">Processed</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Processing Queue -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🤖</span>
                                AI Processing Queue
                            </h2>
                            <div class="space-y-3">
                                <div id="processing-queue" class="space-y-2">
                                    <div class="text-center text-gray-400 py-4">
                                        <div class="text-lg mb-2">⏳</div>
                                        <div class="text-sm">No files in queue</div>
                                    </div>
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button id="process-all" class="flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 transition">Process All</button>
                                    <button id="clear-queue" class="flex-1 px-4 py-2 bg-gray-600 rounded hover:bg-gray-700 transition">Clear Queue</button>
                                </div>
                            </div>
                        </div>

                        <!-- File Categories -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📂</span>
                                Smart Categories
                            </h2>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">📄</span>
                                        <div>
                                            <div class="font-semibold">Documents</div>
                                            <div class="text-sm text-gray-400">PDF, DOC, TXT</div>
                                        </div>
                                    </div>
                                    <span class="text-sm font-bold text-blue-400">12</span>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🖼️</span>
                                        <div>
                                            <div class="font-semibold">Images</div>
                                            <div class="text-sm text-gray-400">JPG, PNG, GIF</div>
                                        </div>
                                    </div>
                                    <span class="text-sm font-bold text-green-400">8</span>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🎵</span>
                                        <div>
                                            <div class="font-semibold">Audio</div>
                                            <div class="text-sm text-gray-400">MP3, WAV, FLAC</div>
                                        </div>
                                    </div>
                                    <span class="text-sm font-bold text-purple-400">5</span>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">🎬</span>
                                        <div>
                                            <div class="font-semibold">Video</div>
                                            <div class="text-sm text-gray-400">MP4, AVI, MOV</div>
                                        </div>
                                    </div>
                                    <span class="text-sm font-bold text-red-400">3</span>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-700 rounded">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">📊</span>
                                        <div>
                                            <div class="font-semibold">Data</div>
                                            <div class="text-sm text-gray-400">CSV, JSON, XML</div>
                                        </div>
                                    </div>
                                    <span class="text-sm font-bold text-yellow-400">7</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Center Column: File Browser -->
                    <div class="space-y-6">
                        <!-- File Browser -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🔍</span>
                                Intelligent File Browser
                            </h2>
                            <div class="space-y-4">
                                <!-- Search & Filter -->
                                <div class="flex space-x-2">
                                    <input type="text" id="file-search" placeholder="Search files..." class="flex-1 bg-gray-700 p-2 rounded border border-gray-600">
                                    <select id="file-filter" class="bg-gray-700 p-2 rounded border border-gray-600">
                                        <option value="all">All Types</option>
                                        <option value="documents">Documents</option>
                                        <option value="images">Images</option>
                                        <option value="audio">Audio</option>
                                        <option value="video">Video</option>
                                        <option value="data">Data</option>
                                    </select>
                                </div>
                                
                                <!-- File List -->
                                <div id="file-list" class="space-y-2 max-h-96 overflow-y-auto">
                                    <div class="text-center text-gray-400 py-8">
                                        <div class="text-2xl mb-2">📁</div>
                                        <div class="text-sm">No files uploaded yet</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- File Details -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📋</span>
                                File Details & Analysis
                            </h2>
                            <div id="file-details" class="space-y-4">
                                <div class="text-center text-gray-400 py-8">
                                    <div class="text-lg mb-2">📄</div>
                                    <div class="text-sm">Select a file to view details</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: AI Analysis -->
                    <div class="space-y-6">
                        <!-- Content Analysis -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🧠</span>
                                AI Content Analysis
                            </h2>
                            <div class="space-y-4">
                                <div id="content-analysis" class="space-y-3">
                                    <div class="text-center text-gray-400 py-4">
                                        <div class="text-lg mb-2">🤖</div>
                                        <div class="text-sm">No analysis available</div>
                                    </div>
                                </div>
                                
                                <button id="analyze-content" class="w-full px-4 py-2 bg-purple-600 rounded hover:bg-purple-700 transition">
                                    🧠 Analyze Content
                                </button>
                            </div>
                        </div>

                        <!-- Vector Generation -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🧮</span>
                                Vector Generation
                            </h2>
                            <div class="space-y-4">
                                <div id="vector-display" class="space-y-3">
                                    <div class="text-center text-gray-400 py-4">
                                        <div class="text-lg mb-2">🧮</div>
                                        <div class="text-sm">No vectors generated</div>
                                    </div>
                                </div>
                                
                                <button id="generate-vectors" class="w-full px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 transition">
                                    🧮 Generate Vectors
                                </button>
                            </div>
                        </div>

                        <!-- Cross-Reference -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">🔗</span>
                                Cross-Reference Analysis
                            </h2>
                            <div class="space-y-4">
                                <div id="cross-reference" class="space-y-3">
                                    <div class="text-center text-gray-400 py-4">
                                        <div class="text-lg mb-2">🔗</div>
                                        <div class="text-sm">No references found</div>
                                    </div>
                                </div>
                                
                                <button id="find-references" class="w-full px-4 py-2 bg-green-600 rounded hover:bg-green-700 transition">
                                    🔗 Find References
                                </button>
                            </div>
                        </div>

                        <!-- Storage Analytics -->
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-4 flex items-center">
                                <span class="mr-2">📊</span>
                                Storage Analytics
                            </h2>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-lg font-bold text-blue-400" id="storage-used">2.4 GB</div>
                                        <div class="text-xs text-gray-400">Used</div>
                                    </div>
                                    <div class="bg-gray-700 p-3 rounded text-center">
                                        <div class="text-lg font-bold text-green-400" id="storage-available">47.6 GB</div>
                                        <div class="text-xs text-gray-400">Available</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700 p-3 rounded">
                                    <div class="text-sm text-gray-400 mb-2">Storage by Type</div>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span>Documents:</span>
                                            <span class="text-blue-400">45%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Images:</span>
                                            <span class="text-green-400">30%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Media:</span>
                                            <span class="text-purple-400">20%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Data:</span>
                                            <span class="text-yellow-400">5%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="internet-of-things-page" class="page-content">
        <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-full max-w-2xl bg-black/50 backdrop-blur-sm rounded-lg p-8">
                <h1 class="text-3xl font-bold text-center mb-6">Internet of Things</h1>
                 <div class="space-y-4">
                    <div class="bg-gray-800 p-4 rounded-lg flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Aura Smartwatch</h3>
                            <p class="text-sm text-gray-400">Status: Disconnected</p>
                        </div>
                        <button class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Connect</button>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Aura Smart Ring</h3>
                            <p class="text-sm text-gray-400">Status: Disconnected</p>
                        </div>
                        <button class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Connect</button>
                    </div>
                 </div>
            </div>
        </div>
    </div>

    <div id="left-toolbar">
        <button class="left-toolbar-btn" data-page="internet-of-things-page">Internet of Things</button>
        <button class="left-toolbar-btn" data-page="file-storage-page">File Storage</button>
        <button class="left-toolbar-btn" data-page="algorithm-settings-page">Algorithm Settings</button>
        <button class="left-toolbar-btn" data-page="social-media-page">Social Media</button>
        <button class="left-toolbar-btn" data-page="memory-palace-page">Memory Palace</button>
        <button class="left-toolbar-btn" data-page="timeline-mastery-page">Timeline Mastery</button>
        <button class="left-toolbar-btn" data-page="avatar-builder-page">Avatar Builder</button>
        <button class="left-toolbar-btn active" data-page="aura-builder-page">Aura Builder</button>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.164.1/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        const COLS = 24;
        const ROWS = 12;
        const CELL_SIZE = 20;
        const GRID_WIDTH = COLS * CELL_SIZE;
        const GRID_HEIGHT = ROWS * CELL_SIZE;

        let scene, camera, renderer, controls;
        let gizmoScene, gizmoCamera, gizmoRenderer, worldOriginGizmo;
        let geosphereTop, geosphereBottom;
        let raycaster, mouse;
        let cameraState = 'outside';
        let lastExteriorCamPos = new THREE.Vector3(0, 0, 600);
        let clock;
        let isDragging = false;
        let activeTorusIndex = 0;
        const allTori = [];
        
        const textStates = ['Normal', 'Off', 'Mirrored'];
        let currentTextStateIndex = 0;
        let stepCounter = 0;

        const viewSelect = document.getElementById('viewSelect');
        const interiorBtn = document.getElementById('interiorBtn');
        const textToggleSelect = document.getElementById('textToggleSelect');
        const saveBtn = document.getElementById('saveBtn');
        const loadBtn = document.getElementById('loadBtn');
        const resetBtn = document.getElementById('resetBtn');
        const canvasContainer = document.getElementById('canvas-container');
        const gizmoContainer = document.getElementById('gizmo-container');
        const rightSidebar = document.getElementById('right-sidebar');
        const worldOriginToggle = document.getElementById('worldOriginToggle');
        const stepCounterEl = document.getElementById('step-counter');
        const activeChakraHeader = document.getElementById('active-chakra-header');
        const leftToolbarBtns = document.querySelectorAll('#left-toolbar .left-toolbar-btn');
        const timelineControls = document.getElementById('timeline-controls');
        
        // Timeline Mastery Variables
        let currentDate = new Date();
        let currentPeriod = 'monthly';
        let events = [];
        let todos = [];
        let countdowns = [];
        let birthDate = null;
        let importantDates = [];

        const chakraData = [
            { name: 'Root', color: '#EF4444' },
            { name: 'Sacral', color: '#F97316' },
            { name: 'Solar Plexus', color: '#EAB308' },
            { name: 'Heart', color: '#22C55E' },
            { name: 'Throat', color: '#3B82F6' },
            { name: 'Third Eye', color: '#6366F1' },
            { name: 'Crown', color: '#8B5CF6' }
        ];

        function incrementStep(action) {
            stepCounter++;
            stepCounterEl.textContent = stepCounter;
        }

        function createGridTexture(labelText, cellsToHighlight, color, currentHoverCell = null, textState = 'Normal') {
            const canvas = document.createElement('canvas');
            canvas.width = GRID_WIDTH;
            canvas.height = GRID_HEIGHT;
            const context = canvas.getContext('2d');

            context.fillStyle = '#111827';
            context.fillRect(0, 0, canvas.width, canvas.height);

            context.fillStyle = color + 'B3';
            cellsToHighlight.forEach(key => {
                const [x, y] = key.split('-').map(Number);
                context.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
            });

            if (currentHoverCell) {
                context.fillStyle = color + '66';
                context.fillRect(currentHoverCell.x * CELL_SIZE, currentHoverCell.y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
            }
            
            context.strokeStyle = '#4B5563';
            context.lineWidth = 2;
            for (let i = 0; i <= ROWS; i++) {
                context.beginPath();
                context.moveTo(0, i * CELL_SIZE);
                context.lineTo(GRID_WIDTH, i * CELL_SIZE);
                context.stroke();
            }
            for (let i = 0; i <= COLS; i++) {
                context.beginPath();
                context.moveTo(i * CELL_SIZE, 0);
                context.lineTo(i * CELL_SIZE, GRID_HEIGHT);
                context.stroke();
            }
            
            if (textState !== 'Off') {
                context.save();
                if (textState === 'Mirrored') {
                    context.translate(canvas.width, 0);
                    context.scale(-1, 1);
                }
                context.fillStyle = 'rgba(255, 255, 255, 0.7)';
                context.font = 'bold 32px Inter';
                context.textAlign = 'center';
                context.textBaseline = 'middle';
                context.fillText(labelText, GRID_WIDTH / 2, GRID_HEIGHT / 2);
                context.restore();
            }
            
            return new THREE.CanvasTexture(canvas);
        }
        
        function updateTexture(plane, hoverCell = null) {
            const torus = allTori.find(t => t.insidePlane === plane || t.outsidePlane === plane);
            if (!torus) return;
            const isInside = plane.name.includes('inside');
            const label = isInside ? 'INSIDE (PRIVATE)' : 'OUTSIDE (PUBLIC)';
            const cells = torus.selectedCells[isInside ? 'inside' : 'outside'];
            const textState = textStates[currentTextStateIndex];
            
            plane.material.map.dispose();
            plane.material.map = createGridTexture(label, cells, torus.color, hoverCell, textState);
        }

        class Torus {
            constructor(color, index) {
                this.color = color;
                this.index = index;
                this.state = 'flat';
                this.hasBeenFormed = false;
                this.selectedCells = { inside: new Set(), outside: new Set() };

                const textState = textStates[currentTextStateIndex];
                const insideGeometry = new THREE.PlaneGeometry(GRID_WIDTH, GRID_HEIGHT, COLS, ROWS);
                this.insidePlane = new THREE.Mesh(insideGeometry, new THREE.MeshBasicMaterial({ map: createGridTexture('INSIDE (PRIVATE)', this.selectedCells.inside, this.color, null, textState), side: THREE.DoubleSide }));
                
                const outsideGeometry = new THREE.PlaneGeometry(GRID_WIDTH, GRID_HEIGHT, COLS, ROWS);
                this.outsidePlane = new THREE.Mesh(outsideGeometry, new THREE.MeshBasicMaterial({ map: createGridTexture('OUTSIDE (PUBLIC)', this.selectedCells.outside, this.color, null, textState), side: THREE.DoubleSide }));

                this.insidePlane.name = `inside_${index}`;
                this.outsidePlane.name = `outside_${index}`;
                
                this.insidePlane.position.y = GRID_HEIGHT / 2 + 20;
                this.outsidePlane.position.y = -(GRID_HEIGHT / 2 + 20);

                this.initialPositions = {
                    inside: this.insidePlane.geometry.attributes.position.array.slice(),
                    outside: this.outsidePlane.geometry.attributes.position.array.slice()
                };
                this.torusPositions = { inside: null, outside: null };
                
                this.group = new THREE.Group();
                this.group.add(this.insidePlane, this.outsidePlane);
                this.group.visible = false;
                scene.add(this.group);
            }
        }

        function init() {
            scene = new THREE.Scene();
            clock = new THREE.Clock();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 5000);
            camera.position.copy(lastExteriorCamPos);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            canvasContainer.appendChild(renderer.domElement);
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.enablePan = false;
            controls.enableRotate = false;
            controls.enableZoom = true;

            worldOriginGizmo = new THREE.AxesHelper(100);
            scene.add(worldOriginGizmo);

            initGizmo();

            const geoGeosphere = new THREE.IcosahedronGeometry(GRID_WIDTH * 2, 3);
            const matGeosphere = new THREE.MeshBasicMaterial({ color: 0x4B5563, wireframe: true, transparent: true, opacity: 0.1 });
            geosphereTop = new THREE.Mesh(geoGeosphere, matGeosphere);
            geosphereBottom = new THREE.Mesh(geoGeosphere, matGeosphere.clone());
            geosphereTop.position.y = GRID_WIDTH * 2.5;
            geosphereBottom.position.y = -GRID_WIDTH * 2.5;
            scene.add(geosphereTop, geosphereBottom);
            
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();
            
            setupUI();
            switchTorus(0);

            window.addEventListener('resize', onWindowResize);
            window.addEventListener('keydown', onKey);
            window.addEventListener('keyup', onKey);
            canvasContainer.addEventListener('pointerdown', onPointerDown);
            canvasContainer.addEventListener('pointermove', onPointerMove);
            canvasContainer.addEventListener('pointerup', onPointerUp);
        }
        
        function initGizmo() {
            gizmoRenderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            gizmoRenderer.setSize(100, 100);
            gizmoContainer.appendChild(gizmoRenderer.domElement);
            
            gizmoScene = new THREE.Scene();
            gizmoCamera = new THREE.PerspectiveCamera(60, 1, 0.1, 100);
            
            const gizmoHelper = new THREE.AxesHelper(3);
            gizmoScene.add(gizmoHelper);
        }

        function setupUI() {
            const topYinYang = document.createElement('div');
            topYinYang.className = 'sidebar-icon';
            topYinYang.innerHTML = '☯';
            topYinYang.addEventListener('click', () => {
                geosphereTop.visible = !geosphereTop.visible;
                incrementStep('Toggled Top Geosphere');
            });
            rightSidebar.appendChild(topYinYang);

            [...chakraData].reverse().forEach((chakra, i) => {
                const originalIndex = chakraData.length - 1 - i;
                const dot = document.createElement('div');
                dot.className = 'sidebar-icon chakra-dot';
                dot.style.backgroundColor = chakra.color;
                dot.style.setProperty('--glow-color', chakra.color);
                dot.dataset.index = originalIndex;
                dot.addEventListener('click', () => switchTorus(originalIndex));
                rightSidebar.appendChild(dot);
            });
            
            const bottomYinYang = document.createElement('div');
            bottomYinYang.className = 'sidebar-icon';
            bottomYinYang.innerHTML = '☯';
            bottomYinYang.style.transform = 'rotate(90deg)';
            bottomYinYang.addEventListener('click', () => {
                geosphereBottom.visible = !geosphereBottom.visible;
                incrementStep('Toggled Bottom Geosphere');
            });
            rightSidebar.appendChild(bottomYinYang);

            viewSelect.addEventListener('change', (e) => {
                const torus = allTori[activeTorusIndex];
                incrementStep(`View Changed to ${e.target.value}`);
                if (e.target.value === 'torus') {
                    if (!torus.hasBeenFormed) {
                        startAnimation(torus);
                    } else {
                        setView(torus, 'torus');
                    }
                } else {
                    setView(torus, 'flat');
                }
            });

            interiorBtn.addEventListener('click', () => toggleInteriorView(allTori[activeTorusIndex]));
            textToggleSelect.addEventListener('change', (e) => {
                currentTextStateIndex = textStates.indexOf(e.target.value);
                incrementStep(`Text State to ${e.target.value}`);
                toggleTextState();
            });
            saveBtn.addEventListener('click', saveState);
            loadBtn.addEventListener('click', loadState);
            resetBtn.addEventListener('click', resetState);
            worldOriginToggle.addEventListener('change', (e) => {
                worldOriginGizmo.visible = e.target.checked;
                incrementStep(`World Origin Gizmo ${e.target.checked ? 'On' : 'Off'}`);
            });
            
            leftToolbarBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const pageId = btn.dataset.page;
                    switchPage(pageId);
                });
            });
            
            // Timeline Mastery Setup
            setupTimelineMastery();
        }
        
        function setupTimelineMastery() {
            // Load saved data
            loadTimelineData();
            
            // Initial render
            renderCalendar();
            updatePeriodDisplay();
            renderTodos();
            updateCountdowns();
            renderImportantDates();
            updateLunarCalendar();
            updateZodiacSign();
            setupZodiacInteractions();
            
            // Event listeners for timeline view switching
            document.querySelectorAll('.timeline-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const view = btn.dataset.view;
                    switchTimelineView(view);
                });
            });
            
            // Event listeners for period switching
            document.querySelectorAll('.timeline-period-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const period = btn.dataset.period;
                    switchPeriod(period);
                });
            });
            
            // Navigation buttons
            document.getElementById('prev-period').addEventListener('click', () => navigatePeriod(-1));
            document.getElementById('next-period').addEventListener('click', () => navigatePeriod(1));
            document.getElementById('today-btn').addEventListener('click', goToToday);
            
            // Event management
            document.getElementById('add-event-btn').addEventListener('click', () => showEventModal());
            document.getElementById('save-event').addEventListener('click', saveEvent);
            document.getElementById('cancel-event').addEventListener('click', hideEventModal);
            
            // Todo management
            document.getElementById('add-todo-submit').addEventListener('click', addTodo);
            
            // Birth date input
            document.getElementById('birthdate').addEventListener('change', updateLifeStats);
            
            // Important dates management
            document.getElementById('add-important-date').addEventListener('click', addImportantDate);
            
            // Countdown management
            document.getElementById('add-countdown-btn').addEventListener('click', showCountdownModal);
            document.getElementById('save-countdown').addEventListener('click', addCountdown);
            document.getElementById('cancel-countdown').addEventListener('click', hideCountdownModal);
            
            // Import/Export functionality
            document.getElementById('browse-ics-btn').addEventListener('click', () => {
                document.getElementById('ics-file-input').click();
            });
            
            document.getElementById('ics-file-input').addEventListener('change', handleICSImport);
            
            // Year selector for yearly view
            document.getElementById('year-selector').addEventListener('change', (e) => {
                const selectedYear = parseInt(e.target.value);
                currentDate = new Date(selectedYear, currentDate.getMonth(), currentDate.getDate());
                renderCalendar();
                updatePeriodDisplay();
            });
            
            // Setup periodic updates
            setInterval(() => {
                updateLunarCalendar();
                updateZodiacSign();
                updateCountdowns();
            }, 60000); // Update every minute
        }
        
        function handleICSImport(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                parseICSFile(content);
            };
            reader.readAsText(file);
        }
        
        function parseICSFile(content) {
            // Simple ICS parser
            const lines = content.split('\n');
            let currentEvent = null;
            
            lines.forEach(line => {
                if (line.startsWith('BEGIN:VEVENT')) {
                    currentEvent = {};
                } else if (line.startsWith('END:VEVENT')) {
                    if (currentEvent && currentEvent.title && currentEvent.startDate) {
                        events.push({
                            id: Date.now().toString(),
                            title: currentEvent.title,
                            startDate: currentEvent.startDate,
                            endDate: currentEvent.endDate || currentEvent.startDate,
                            description: currentEvent.description || '',
                            color: 'blue'
                        });
                    }
                    currentEvent = null;
                } else if (currentEvent) {
                    if (line.startsWith('SUMMARY:')) {
                        currentEvent.title = line.substring(8);
                    } else if (line.startsWith('DTSTART:')) {
                        const dateStr = line.substring(8);
                        currentEvent.startDate = parseICSDate(dateStr);
                    } else if (line.startsWith('DTEND:')) {
                        const dateStr = line.substring(6);
                        currentEvent.endDate = parseICSDate(dateStr);
                    } else if (line.startsWith('DESCRIPTION:')) {
                        currentEvent.description = line.substring(12);
                    }
                }
            });
            
            saveTimelineData();
            renderCalendar();
            alert(`Imported ${events.length} events from ICS file`);
        }
        
        function parseICSDate(dateStr) {
            // Convert ICS date format to ISO string
            const year = dateStr.substring(0, 4);
            const month = dateStr.substring(4, 6);
            const day = dateStr.substring(6, 8);
            const hour = dateStr.substring(9, 11);
            const minute = dateStr.substring(11, 13);
            const second = dateStr.substring(13, 15);
            
            return `${year}-${month}-${day}T${hour}:${minute}:${second}`;
        }
        
        function switchTimelineView(view) {
            document.querySelectorAll('.timeline-view').forEach(v => v.classList.remove('active'));
            document.getElementById(view).classList.add('active');
            
            document.querySelectorAll('.timeline-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-view="${view}"]`).classList.add('active');
        }
        
        function switchPeriod(period) {
            currentPeriod = period;
            document.querySelectorAll('.timeline-period-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600');
                btn.classList.add('hover:bg-gray-600');
            });
            document.querySelector(`[data-period="${period}"]`).classList.add('bg-blue-600');
            document.querySelector(`[data-period="${period}"]`).classList.remove('hover:bg-gray-600');
            
            // Show/hide year selector based on period
            const yearSelector = document.getElementById('year-selector');
            if (period === 'yearly') {
                yearSelector.classList.remove('hidden');
            } else {
                yearSelector.classList.add('hidden');
            }
            
            // Manage calendar header visibility
            const header = document.querySelector('.calendar-header');
            if (period === 'weekly') {
                header.style.display = 'none';
            } else {
                header.style.display = 'grid';
            }
            
            renderCalendar();
        }
        
        function navigatePeriod(direction) {
            switch(currentPeriod) {
                case 'weekly':
                    currentDate.setDate(currentDate.getDate() + (direction * 7));
                    break;
                case 'monthly':
                    currentDate.setMonth(currentDate.getMonth() + direction);
                    break;
                case 'quarterly':
                    currentDate.setMonth(currentDate.getMonth() + (direction * 3));
                    break;
                case 'seasonally':
                    currentDate.setMonth(currentDate.getMonth() + (direction * 3));
                    break;
                case 'annual':
                    currentDate.setFullYear(currentDate.getFullYear() + direction);
                    break;
                case 'yearly':
                    currentDate.setFullYear(currentDate.getFullYear() + (direction * 10));
                    break;
            }
            renderCalendar();
            updatePeriodDisplay();
        }
        
        function goToToday() {
            currentDate = new Date();
            renderCalendar();
            updatePeriodDisplay();
        }
        
        function updatePeriodDisplay() {
            const display = document.getElementById('current-period-display');
            let periodText = '';
            
            switch(currentPeriod) {
                case 'weekly':
                    const weekStart = new Date(currentDate);
                    weekStart.setDate(currentDate.getDate() - currentDate.getDay());
                    const weekEnd = new Date(weekStart);
                    weekEnd.setDate(weekStart.getDate() + 6);
                    periodText = `${weekStart.toLocaleDateString()} - ${weekEnd.toLocaleDateString()}`;
                    break;
                case 'monthly':
                    periodText = currentDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                    break;
                case 'quarterly':
                    const quarter = Math.floor(currentDate.getMonth() / 3) + 1;
                    periodText = `Q${quarter} ${currentDate.getFullYear()}`;
                    break;
                case 'seasonally':
                    const season = Math.floor(currentDate.getMonth() / 3);
                    const seasons = ['Winter', 'Spring', 'Summer', 'Fall'];
                    periodText = `${seasons[season]} ${currentDate.getFullYear()}`;
                    break;
                case 'annual':
                    periodText = `${currentDate.getFullYear()}`;
                    break;
                case 'yearly':
                    const startYear = currentDate.getFullYear() - 4;
                    const endYear = currentDate.getFullYear() + 5;
                    periodText = `${startYear} - ${endYear}`;
                    break;
            }
            
            display.textContent = periodText;
        }
        
        function renderCalendar() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            
            // Reset grid class for regular views
            grid.className = 'calendar-grid';
            
            let startDate, endDate, daysToShow;
            
            switch(currentPeriod) {
                case 'weekly':
                    // Show current week in Google Calendar style
                    renderWeeklyView();
                    return;
                case 'monthly':
                    // Show current month filling the whole space
                    startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
                    startDate.setDate(startDate.getDate() - startDate.getDay());
                    endDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
                    daysToShow = 42; // 6 weeks
                    grid.className = 'calendar-grid monthly-view';
                    break;
                case 'quarterly':
                    // Show current quarter (3 financial months)
                    renderQuarterlyView();
                    return;
                case 'seasonally':
                    // Show current season (3 seasonal months)
                    renderSeasonalView();
                    return;
                case 'annual':
                    // Show all 12 months in a grid
                    renderAnnualView();
                    return;
                case 'yearly':
                    // Show multiple years (decade view) with year selector
                    renderYearlyView();
                    return;
                default:
                    startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
                    startDate.setDate(startDate.getDate() - startDate.getDay());
                    endDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
                    daysToShow = 42;
                    grid.className = 'calendar-grid monthly-view';
            }
            
            // Create calendar header for monthly view (weekly has its own header)
            if (currentPeriod === 'monthly') {
                const header = document.querySelector('.calendar-header');
                header.style.display = 'grid';
                header.innerHTML = '';
                for (let i = 0; i < 7; i++) {
                    const dayName = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][i];
                    const dayDiv = document.createElement('div');
                    dayDiv.className = 'text-center text-sm font-semibold text-gray-400';
                    dayDiv.textContent = dayName;
                    header.appendChild(dayDiv);
                }
            }
            
            // Generate calendar days
            for (let i = 0; i < daysToShow; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day p-2 border border-gray-600 rounded cursor-pointer hover:bg-gray-700 transition-colors';
                
                // Check if it's today
                const today = new Date();
                if (date.toDateString() === today.toDateString()) {
                    dayDiv.classList.add('today');
                }
                
                // Check if it's in the current period
                if (currentPeriod === 'weekly') {
                    if (date < startDate || date > endDate) {
                        dayDiv.classList.add('other-period');
                    }
                } else if (currentPeriod === 'monthly') {
                    if (date.getMonth() !== currentDate.getMonth()) {
                        dayDiv.classList.add('other-month');
                    }
                } else if (currentPeriod === 'quarterly' || currentPeriod === 'seasonally') {
                    const quarter = Math.floor(currentDate.getMonth() / 3);
                    const dayQuarter = Math.floor(date.getMonth() / 3);
                    if (dayQuarter !== quarter) {
                        dayDiv.classList.add('other-period');
                    }
                }
                
                dayDiv.textContent = date.getDate();
                dayDiv.onclick = () => showEventModal(date);
                
                // Add events for this day
                const dayEvents = events.filter(event => {
                    const eventDate = new Date(event.startDate);
                    return eventDate.toDateString() === date.toDateString();
                });
                
                dayEvents.forEach(event => {
                    const eventElement = document.createElement('div');
                    eventElement.className = `event-indicator event-${event.color}`;
                    eventElement.textContent = event.title;
                    dayDiv.appendChild(eventElement);
                });
                
                grid.appendChild(dayDiv);
            }
        }
        
        function renderAnnualView() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            grid.className = 'calendar-grid annual-view';
            
            // Create annual view header
            const header = document.querySelector('.calendar-header');
            header.innerHTML = '';
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            for (let i = 0; i < 12; i++) {
                const monthDiv = document.createElement('div');
                monthDiv.className = 'text-center text-sm font-semibold text-gray-400';
                monthDiv.textContent = months[i];
                header.appendChild(monthDiv);
            }
            
            // Create 12 month columns
            for (let month = 0; month < 12; month++) {
                const monthDiv = document.createElement('div');
                monthDiv.className = 'flex flex-col space-y-1 h-full';
                
                const monthName = document.createElement('div');
                monthName.className = 'text-center text-xs font-semibold text-gray-500 mb-2';
                monthName.textContent = months[month];
                monthDiv.appendChild(monthName);
                
                // Get first day of month and number of days
                const firstDay = new Date(currentDate.getFullYear(), month, 1);
                const lastDay = new Date(currentDate.getFullYear(), month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startDay = firstDay.getDay();
                
                // Add empty cells for days before month starts
                for (let i = 0; i < startDay; i++) {
                    const emptyDiv = document.createElement('div');
                    emptyDiv.className = 'h-4';
                    monthDiv.appendChild(emptyDiv);
                }
                
                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayDiv = document.createElement('div');
                    dayDiv.className = 'calendar-day text-xs text-center p-1 rounded cursor-pointer hover:bg-gray-700';
                    
                    const date = new Date(currentDate.getFullYear(), month, day);
                    const today = new Date();
                    
                    if (date.toDateString() === today.toDateString()) {
                        dayDiv.classList.add('today');
                    }
                    
                    dayDiv.textContent = day;
                    dayDiv.onclick = () => showEventModal(date);
                    
                    // Add events for this day
                    const dayEvents = events.filter(event => {
                        const eventDate = new Date(event.startDate);
                        return eventDate.toDateString() === date.toDateString();
                    });
                    
                    if (dayEvents.length > 0) {
                        dayDiv.classList.add('bg-blue-600');
                    }
                    
                    monthDiv.appendChild(dayDiv);
                }
                
                grid.appendChild(monthDiv);
            }
        }
        
        function renderYearlyView() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            grid.className = 'calendar-grid yearly-view';
            
            // Show year selector
            const yearSelector = document.getElementById('year-selector');
            yearSelector.classList.remove('hidden');
            
            // Populate year selector
            yearSelector.innerHTML = '';
            const currentYear = currentDate.getFullYear();
            for (let year = currentYear - 50; year <= currentYear + 50; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                if (year === currentYear) {
                    option.selected = true;
                }
                yearSelector.appendChild(option);
            }
            
            // Create yearly view header
            const header = document.querySelector('.calendar-header');
            header.innerHTML = '';
            const years = [];
            for (let i = -4; i <= 5; i++) {
                years.push(currentYear + i);
            }
            
            for (let year of years) {
                const yearDiv = document.createElement('div');
                yearDiv.className = 'text-center text-sm font-semibold text-gray-400';
                yearDiv.textContent = year;
                header.appendChild(yearDiv);
            }
            
            // Create year columns
            for (let year of years) {
                const yearDiv = document.createElement('div');
                yearDiv.className = 'flex flex-col space-y-1 h-full';
                
                const yearName = document.createElement('div');
                yearName.className = 'text-center text-xs font-semibold text-gray-500 mb-2';
                yearName.textContent = year;
                yearDiv.appendChild(yearName);
                
                // Show months as dots or small indicators
                for (let month = 0; month < 12; month++) {
                    const monthDiv = document.createElement('div');
                    monthDiv.className = 'calendar-day text-xs text-center p-1 rounded cursor-pointer hover:bg-gray-700';
                    
                    const monthNames = ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'];
                    monthDiv.textContent = monthNames[month];
                    
                    // Check if current month/year
                    if (year === currentDate.getFullYear() && month === currentDate.getMonth()) {
                        monthDiv.classList.add('today');
                    }
                    
                    monthDiv.onclick = () => {
                        currentDate = new Date(year, month, 1);
                        currentPeriod = 'monthly';
                        updatePeriodDisplay();
                        renderCalendar();
                    };
                    
                    yearDiv.appendChild(monthDiv);
                }
                
                grid.appendChild(yearDiv);
            }
        }
        
        function showEventModal(date = null) {
            const modal = document.getElementById('event-modal');
            modal.classList.remove('hidden');
            
            if (date) {
                document.getElementById('event-start-date').value = date.toISOString().split('T')[0];
                document.getElementById('event-end-date').value = date.toISOString().split('T')[0];
            }
        }
        
        function hideEventModal() {
            const modal = document.getElementById('event-modal');
            modal.classList.add('hidden');
            
            // Clear form
            document.getElementById('event-title').value = '';
            document.getElementById('event-start-date').value = '';
            document.getElementById('event-end-date').value = '';
            document.getElementById('event-description').value = '';
            document.getElementById('event-color').value = 'blue';
        }
        
        function saveEvent() {
            const title = document.getElementById('event-title').value;
            const startDate = document.getElementById('event-start-date').value;
            const endDate = document.getElementById('event-end-date').value;
            const description = document.getElementById('event-description').value;
            const color = document.getElementById('event-color').value;
            
            if (!title || !startDate) {
                alert('Please fill in at least the title and start date.');
                return;
            }
            
            const event = {
                id: Date.now(),
                title,
                startDate,
                endDate: endDate || startDate,
                description,
                color
            };
            
            events.push(event);
            saveTimelineData();
            renderCalendar();
            hideEventModal();
        }
        
        function addTodo() {
            const text = document.getElementById('new-todo').value;
            const date = document.getElementById('todo-date').value;
            
            if (!text) return;
            
            const todo = {
                id: Date.now(),
                text,
                date,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            todos.push(todo);
            saveTimelineData();
            renderTodos();
            
            document.getElementById('new-todo').value = '';
            document.getElementById('todo-date').value = '';
        }
        
        function renderTodos() {
            const today = new Date().toISOString().split('T')[0];
            const todayTodos = todos.filter(todo => todo.date === today);
            const weekTodos = todos.filter(todo => {
                const todoDate = new Date(todo.date);
                const weekStart = new Date();
                weekStart.setDate(weekStart.getDate() - weekStart.getDay());
                const weekEnd = new Date(weekStart);
                weekEnd.setDate(weekEnd.getDate() + 6);
                return todoDate >= weekStart && todoDate <= weekEnd;
            });
            const monthTodos = todos.filter(todo => {
                const todoDate = new Date(todo.date);
                return todoDate.getMonth() === currentDate.getMonth() && 
                       todoDate.getFullYear() === currentDate.getFullYear();
            });
            
            renderTodoList('today-todos', todayTodos);
            renderTodoList('week-todos', weekTodos);
            renderTodoList('month-todos', monthTodos);
        }
        
        function renderTodoList(containerId, todos) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            todos.forEach(todo => {
                const todoElement = document.createElement('div');
                todoElement.className = 'flex items-center space-x-2';
                todoElement.innerHTML = `
                    <input type="checkbox" class="rounded" ${todo.completed ? 'checked' : ''}>
                    <span class="flex-1 ${todo.completed ? 'line-through text-gray-500' : ''}">${todo.text}</span>
                    <button class="text-red-400 hover:text-red-300" onclick="deleteTodo(${todo.id})">×</button>
                `;
                
                const checkbox = todoElement.querySelector('input');
                checkbox.addEventListener('change', () => {
                    todo.completed = checkbox.checked;
                    saveTimelineData();
                    renderTodos();
                });
                
                container.appendChild(todoElement);
            });
        }
        
        function deleteTodo(id) {
            todos = todos.filter(todo => todo.id !== id);
            saveTimelineData();
            renderTodos();
        }
        
        function updateLifeStats() {
            const birthDateInput = document.getElementById('birthdate');
            if (birthDateInput.value) {
                birthDate = new Date(birthDateInput.value);
                const now = new Date();
                const diffTime = Math.abs(now - birthDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const diffYears = Math.floor(diffDays / 365.25);
                const diffWeeks = Math.floor(diffDays / 7);
                const estimatedHeartbeats = diffDays * 24 * 60 * 80; // 80 bpm average
                
                document.getElementById('days-since').textContent = diffDays.toLocaleString();
                document.getElementById('years-since').textContent = diffYears;
                document.getElementById('weeks-since').textContent = diffWeeks.toLocaleString();
                document.getElementById('heartbeats').textContent = estimatedHeartbeats.toLocaleString();
                
                saveTimelineData();
            }
        }
        
        function saveTimelineData() {
            const data = {
                events,
                todos,
                countdowns,
                importantDates,
                birthDate: birthDate ? birthDate.toISOString() : null,
                currentDate: currentDate.toISOString(),
                currentPeriod
            };
            localStorage.setItem('timelineData', JSON.stringify(data));
        }
        
        function loadTimelineData() {
            const saved = localStorage.getItem('timelineData');
            if (saved) {
                const data = JSON.parse(saved);
                events = data.events || [];
                todos = data.todos || [];
                countdowns = data.countdowns || [];
                importantDates = data.importantDates || [];
                birthDate = data.birthDate ? new Date(data.birthDate) : null;
                currentDate = data.currentDate ? new Date(data.currentDate) : new Date();
                currentPeriod = data.currentPeriod || 'monthly';
                
                if (birthDate) {
                    document.getElementById('birthdate').value = birthDate.toISOString().split('T')[0];
                    updateLifeStats();
                }
                
                renderTodos();
                updateCountdowns();
                renderImportantDates();
            }
        }
        
        function updateCountdowns() {
            const now = new Date();
            const countdownsList = document.getElementById('countdowns-list');
            if (!countdownsList) return;
            
            countdownsList.innerHTML = '';
            
            if (countdowns.length === 0) {
                countdownsList.innerHTML = `
                    <div class="text-center text-gray-400 py-8">
                        <div class="text-4xl mb-4">⏰</div>
                        <p>No countdowns yet. Click "Add Countdown" to create your first one!</p>
                    </div>
                `;
                return;
            }
            
            countdowns.forEach(countdown => {
                const targetDate = new Date(countdown.targetDate);
                const diffTime = targetDate - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const diffHours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const diffMinutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));
                
                let urgencyClass = '';
                let urgencyText = '';
                
                if (diffDays < 0) {
                    urgencyClass = 'text-red-400';
                    urgencyText = 'Overdue';
                } else if (diffDays <= 1) {
                    urgencyClass = 'text-red-400';
                    urgencyText = 'Today!';
                } else if (diffDays <= 7) {
                    urgencyClass = 'text-yellow-400';
                    urgencyText = 'This week';
                } else if (diffDays <= 30) {
                    urgencyClass = 'text-blue-400';
                    urgencyText = 'This month';
                } else {
                    urgencyClass = 'text-green-400';
                    urgencyText = 'Upcoming';
                }
                
                const countdownElement = document.createElement('div');
                countdownElement.className = `bg-gray-700 p-4 rounded-lg border-l-4 border-${countdown.color}-500`;
                countdownElement.setAttribute('data-countdown-id', countdown.id);
                
                countdownElement.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-semibold text-lg">${countdown.title}</h3>
                            <p class="text-sm text-gray-400">${targetDate.toLocaleDateString()}</p>
                            <p class="text-xs text-gray-500 mt-1">${urgencyText}</p>
                        </div>
                        <div class="text-right">
                            <div class="countdown-days text-2xl font-bold ${urgencyClass}">${Math.max(0, diffDays)}</div>
                            <div class="text-sm text-gray-400">days</div>
                            ${diffDays >= 0 ? `<div class="text-xs text-gray-500 mt-1">${diffHours}h ${diffMinutes}m</div>` : ''}
                        </div>
                        <div class="ml-4 flex space-x-2">
                            <button class="edit-countdown text-blue-400 hover:text-blue-300 text-sm" onclick="editCountdown('${countdown.id}')">✏️</button>
                            <button class="delete-countdown text-red-400 hover:text-red-300 text-sm" onclick="deleteCountdown('${countdown.id}')">🗑️</button>
                        </div>
                    </div>
                `;
                
                countdownsList.appendChild(countdownElement);
            });
        }
        
        function showCountdownModal() {
            document.getElementById('countdown-modal').classList.remove('hidden');
            resetCountdownModal();
        }
        
        function hideCountdownModal() {
            document.getElementById('countdown-modal').classList.add('hidden');
        }
        
        function addCountdown() {
            const title = document.getElementById('countdown-title').value.trim();
            const targetDate = document.getElementById('countdown-date').value;
            const color = document.getElementById('countdown-color').value;
            
            if (!title || !targetDate) {
                alert('Please fill in all fields');
                return;
            }
            
            const countdown = {
                id: Date.now().toString(),
                title: title,
                targetDate: targetDate,
                color: color,
                createdAt: new Date().toISOString()
            };
            
            countdowns.push(countdown);
            saveTimelineData();
            updateCountdowns();
            hideCountdownModal();
        }
        
        function editCountdown(id) {
            const countdown = countdowns.find(c => c.id === id);
            if (!countdown) return;
            
            document.getElementById('countdown-title').value = countdown.title;
            document.getElementById('countdown-date').value = countdown.targetDate;
            document.getElementById('countdown-color').value = countdown.color;
            
            // Change modal title and button
            const modal = document.getElementById('countdown-modal');
            modal.querySelector('h3').textContent = 'Edit Countdown';
            const saveBtn = document.getElementById('save-countdown');
            saveBtn.textContent = 'Update';
            saveBtn.onclick = () => updateCountdown(id);
            
            modal.classList.remove('hidden');
        }
        
        function updateCountdown(id) {
            const title = document.getElementById('countdown-title').value.trim();
            const targetDate = document.getElementById('countdown-date').value;
            const color = document.getElementById('countdown-color').value;
            
            if (!title || !targetDate) {
                alert('Please fill in all fields');
                return;
            }
            
            const countdownIndex = countdowns.findIndex(c => c.id === id);
            if (countdownIndex !== -1) {
                countdowns[countdownIndex] = {
                    ...countdowns[countdownIndex],
                    title: title,
                    targetDate: targetDate,
                    color: color
                };
                
                saveTimelineData();
                updateCountdowns();
                hideCountdownModal();
                
                // Reset modal state
                resetCountdownModal();
            }
        }
        
        function resetCountdownModal() {
            const saveBtn = document.getElementById('save-countdown');
            const modalTitle = document.getElementById('countdown-modal').querySelector('h3');
            
            saveBtn.textContent = 'Save';
            saveBtn.onclick = addCountdown;
            modalTitle.textContent = 'Add New Countdown';
            
            // Clear form fields
            document.getElementById('countdown-title').value = '';
            document.getElementById('countdown-date').value = '';
            document.getElementById('countdown-color').value = 'blue';
        }
        
        function deleteCountdown(id) {
            if (confirm('Are you sure you want to delete this countdown?')) {
                countdowns = countdowns.filter(c => c.id !== id);
                saveTimelineData();
                updateCountdowns();
            }
        }
        
        function addImportantDate() {
            const date = document.getElementById('important-date-input').value;
            const description = document.getElementById('important-date-description').value.trim();
            
            if (!date || !description) {
                alert('Please fill in both date and description');
                return;
            }
            
            const importantDate = {
                id: Date.now().toString(),
                date: date,
                description: description,
                createdAt: new Date().toISOString()
            };
            
            importantDates.push(importantDate);
            saveTimelineData();
            renderImportantDates();
            
            // Clear inputs
            document.getElementById('important-date-input').value = '';
            document.getElementById('important-date-description').value = '';
        }
        
        function deleteImportantDate(id) {
            if (confirm('Are you sure you want to delete this important date?')) {
                importantDates = importantDates.filter(d => d.id !== id);
                saveTimelineData();
                renderImportantDates();
            }
        }
        
        function renderImportantDates() {
            const container = document.getElementById('important-dates-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (importantDates.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-sm">No important dates added yet.</p>';
                return;
            }
            
            importantDates.forEach(importantDate => {
                const dateElement = document.createElement('div');
                dateElement.className = 'flex items-center space-x-3 mb-2';
                dateElement.innerHTML = `
                    <span class="text-sm text-gray-300">${importantDate.date}</span>
                    <span class="text-sm flex-1">${importantDate.description}</span>
                    <button class="text-red-400 hover:text-red-300 text-sm" onclick="deleteImportantDate('${importantDate.id}')">×</button>
                `;
                container.appendChild(dateElement);
            });
        }
        
        function updateLunarCalendar() {
            const now = new Date();
            const moonPhases = ['🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗', '🌘'];
            const lunarDay = Math.floor((now.getTime() / (29.530588 * 24 * 60 * 60 * 1000)) % 29.530588) + 1;
            const phaseIndex = Math.floor((lunarDay / 29.530588) * 8) % 8;
            
            document.getElementById('moon-phase').textContent = moonPhases[phaseIndex];
            document.getElementById('lunar-day').textContent = Math.floor(lunarDay);
            
            // Update lunar phase dates
            updateLunarPhaseDates();
            
            // Render lunar calendar grid
            renderLunarCalendar();
        }
        
        function updateLunarPhaseDates() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            
            // Calculate approximate lunar phase dates for current month
            const lunarCycle = 29.530588;
            const baseDate = new Date(year, month, 1);
            const daysSinceNewMoon = 0; // This would need more complex calculation
            
            const newMoonDate = new Date(baseDate);
            newMoonDate.setDate(1);
            const firstQuarterDate = new Date(newMoonDate);
            firstQuarterDate.setDate(newMoonDate.getDate() + 7);
            const fullMoonDate = new Date(newMoonDate);
            fullMoonDate.setDate(newMoonDate.getDate() + 14);
            const lastQuarterDate = new Date(newMoonDate);
            lastQuarterDate.setDate(newMoonDate.getDate() + 21);
            
            document.getElementById('new-moon-date').textContent = newMoonDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            document.getElementById('first-quarter-date').textContent = firstQuarterDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            document.getElementById('full-moon-date').textContent = fullMoonDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            document.getElementById('last-quarter-date').textContent = lastQuarterDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }
        
        function renderLunarCalendar() {
            const grid = document.getElementById('lunar-calendar-grid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            // Create lunar calendar header
            const lunarDayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            lunarDayNames.forEach(day => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'text-center text-xs font-semibold text-gray-400 p-1';
                dayDiv.textContent = day;
                grid.appendChild(dayDiv);
            });
            
            // Get current month's lunar days
            const currentDate = new Date();
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDay = new Date(year, month, 1);
            const startDay = firstDay.getDay();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < startDay; i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.className = 'h-16';
                grid.appendChild(emptyDiv);
            }
            
            // Calculate lunar days for the month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const lunarDay = calculateLunarDay(date);
                const phase = getLunarPhase(lunarDay);
                
                const dayDiv = document.createElement('div');
                dayDiv.className = 'lunar-day text-center p-2 border border-gray-600 rounded cursor-pointer hover:bg-gray-600 transition-colors';
                
                const dayNumber = document.createElement('div');
                dayNumber.className = 'text-xs font-semibold';
                dayNumber.textContent = day;
                dayDiv.appendChild(dayNumber);
                
                const lunarPhase = document.createElement('div');
                lunarPhase.className = 'text-lg';
                lunarPhase.textContent = phase;
                dayDiv.appendChild(lunarPhase);
                
                const lunarDayNumber = document.createElement('div');
                lunarDayNumber.className = 'text-xs text-gray-400';
                lunarDayNumber.textContent = `L${Math.floor(lunarDay)}`;
                dayDiv.appendChild(lunarDayNumber);
                
                // Highlight current day
                if (date.toDateString() === new Date().toDateString()) {
                    dayDiv.classList.add('bg-blue-600', 'text-white');
                }
                
                grid.appendChild(dayDiv);
            }
        }
        
        function calculateLunarDay(date) {
            // Simplified lunar day calculation
            const baseDate = new Date(2000, 0, 6); // Known new moon date
            const timeDiff = date.getTime() - baseDate.getTime();
            const lunarDays = (timeDiff / (1000 * 60 * 60 * 24)) % 29.530588;
            return lunarDays + 1;
        }
        
        function getLunarPhase(lunarDay) {
            const phases = ['🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗', '🌘'];
            const phaseIndex = Math.floor((lunarDay / 29.530588) * 8) % 8;
            return phases[phaseIndex];
        }
        
        function updateZodiacSign() {
            const now = new Date();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            
            let sign = '';
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) sign = '♈ Aries';
            else if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) sign = '♉ Taurus';
            else if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) sign = '♊ Gemini';
            else if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) sign = '♋ Cancer';
            else if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) sign = '♌ Leo';
            else if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) sign = '♍ Virgo';
            else if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) sign = '♎ Libra';
            else if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) sign = '♏ Scorpio';
            else if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) sign = '♐ Sagittarius';
            else if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) sign = '♑ Capricorn';
            else if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) sign = '♒ Aquarius';
            else sign = '♓ Pisces';
            
            document.getElementById('current-zodiac').textContent = sign;
            
            // Update planetary positions
            updatePlanetaryPositions();
            
            // Highlight current zodiac sign
            highlightCurrentZodiacSign();
        }
        
        function updatePlanetaryPositions() {
            const now = new Date();
            
            // Simplified planetary positions (in real astrology, this would be much more complex)
            const planetarySigns = {
                sun: getZodiacSign(now),
                moon: getZodiacSign(new Date(now.getTime() + 2 * 24 * 60 * 60 * 1000)), // Moon moves faster
                mercury: getZodiacSign(new Date(now.getTime() + 1 * 24 * 60 * 60 * 1000)),
                venus: getZodiacSign(new Date(now.getTime() - 1 * 24 * 60 * 60 * 1000)),
                mars: getZodiacSign(new Date(now.getTime() - 2 * 24 * 60 * 60 * 1000)),
                jupiter: getZodiacSign(new Date(now.getTime() + 5 * 24 * 60 * 60 * 1000)),
                saturn: getZodiacSign(new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000)),
                uranus: getZodiacSign(new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000))
            };
            
            document.getElementById('sun-sign').textContent = planetarySigns.sun;
            document.getElementById('moon-sign').textContent = planetarySigns.moon;
            document.getElementById('mercury-sign').textContent = planetarySigns.mercury;
            document.getElementById('venus-sign').textContent = planetarySigns.venus;
            document.getElementById('mars-sign').textContent = planetarySigns.mars;
            document.getElementById('jupiter-sign').textContent = planetarySigns.jupiter;
            document.getElementById('saturn-sign').textContent = planetarySigns.saturn;
            document.getElementById('uranus-sign').textContent = planetarySigns.uranus;
        }
        
        function getZodiacSign(date) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return 'Aries';
            else if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return 'Taurus';
            else if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) return 'Gemini';
            else if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) return 'Cancer';
            else if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return 'Leo';
            else if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return 'Virgo';
            else if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) return 'Libra';
            else if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) return 'Scorpio';
            else if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) return 'Sagittarius';
            else if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return 'Capricorn';
            else if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return 'Aquarius';
            else return 'Pisces';
        }
        
        function highlightCurrentZodiacSign() {
            // Remove previous highlights
            document.querySelectorAll('.zodiac-sign').forEach(sign => {
                sign.classList.remove('bg-blue-600', 'text-white');
            });
            
            // Highlight current sign
            const currentSign = getZodiacSign(new Date()).toLowerCase();
            const currentSignElement = document.querySelector(`[data-sign="${currentSign}"]`);
            if (currentSignElement) {
                currentSignElement.classList.add('bg-blue-600', 'text-white');
            }
        }
        
        function setupZodiacInteractions() {
            document.querySelectorAll('.zodiac-sign').forEach(sign => {
                sign.addEventListener('click', () => {
                    const signName = sign.dataset.sign;
                    showZodiacDetails(signName);
                });
            });
        }
        
        function showZodiacDetails(signName) {
            const signInfo = {
                aries: { element: 'Fire', quality: 'Cardinal', ruler: 'Mars', traits: 'Energetic, Courageous, Independent' },
                taurus: { element: 'Earth', quality: 'Fixed', ruler: 'Venus', traits: 'Patient, Reliable, Determined' },
                gemini: { element: 'Air', quality: 'Mutable', ruler: 'Mercury', traits: 'Adaptable, Versatile, Communicative' },
                cancer: { element: 'Water', quality: 'Cardinal', ruler: 'Moon', traits: 'Nurturing, Protective, Intuitive' },
                leo: { element: 'Fire', quality: 'Fixed', ruler: 'Sun', traits: 'Confident, Creative, Generous' },
                virgo: { element: 'Earth', quality: 'Mutable', ruler: 'Mercury', traits: 'Analytical, Practical, Diligent' },
                libra: { element: 'Air', quality: 'Cardinal', ruler: 'Venus', traits: 'Diplomatic, Fair, Social' },
                scorpio: { element: 'Water', quality: 'Fixed', ruler: 'Pluto', traits: 'Passionate, Mysterious, Determined' },
                sagittarius: { element: 'Fire', quality: 'Mutable', ruler: 'Jupiter', traits: 'Optimistic, Adventurous, Philosophical' },
                capricorn: { element: 'Earth', quality: 'Cardinal', ruler: 'Saturn', traits: 'Ambitious, Disciplined, Responsible' },
                aquarius: { element: 'Air', quality: 'Fixed', ruler: 'Uranus', traits: 'Innovative, Humanitarian, Independent' },
                pisces: { element: 'Water', quality: 'Mutable', ruler: 'Neptune', traits: 'Compassionate, Artistic, Intuitive' }
            };
            
            const info = signInfo[signName];
            if (info) {
                // Create a modal or tooltip with zodiac details
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="bg-gray-800 p-6 rounded-lg max-w-md w-full mx-4">
                        <h3 class="text-xl font-bold mb-4">${signName.charAt(0).toUpperCase() + signName.slice(1)}</h3>
                        <div class="space-y-2">
                            <div><strong>Element:</strong> ${info.element}</div>
                            <div><strong>Quality:</strong> ${info.quality}</div>
                            <div><strong>Ruler:</strong> ${info.ruler}</div>
                            <div><strong>Traits:</strong> ${info.traits}</div>
                        </div>
                        <button class="mt-4 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700" onclick="this.parentElement.parentElement.remove()">Close</button>
                    </div>
                `;
                document.body.appendChild(modal);
            }
        }
        
        // Update lunar and zodiac info periodically
        setInterval(() => {
            updateLunarCalendar();
            updateZodiacSign();
            updateCountdowns();
        }, 60000); // Update every minute

        function switchPage(pageId) {
            document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');

            leftToolbarBtns.forEach(b => b.classList.remove('active'));
            document.querySelector(`.left-toolbar-btn[data-page="${pageId}"]`).classList.add('active');
            
            allTori.forEach(t => t.group.visible = false);

            if (pageId === 'aura-builder-page') {
                if (allTori[activeTorusIndex]) {
                    allTori[activeTorusIndex].group.visible = true;
                }
            }
            
            const pageName = pageId.replace('-page', '').replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            
            if (!localStorage.getItem(`visited_${pageId}`)) {
                const welcomeDiv = document.createElement('div');
                welcomeDiv.className = 'welcome-message';
                welcomeDiv.innerHTML = `<h2 class="text-2xl font-bold mb-4">You Have Now Entered ${pageName}</h2><p>Let's Begin</p>`;
                document.body.appendChild(welcomeDiv);
                
                setTimeout(() => {
                    welcomeDiv.style.transition = 'opacity 0.5s';
                    welcomeDiv.style.opacity = '0';
                    setTimeout(() => welcomeDiv.remove(), 500);
                }, 2000);
                
                localStorage.setItem(`visited_${pageId}`, 'true');
            }
        }
        
        function toggleTextState() {
            allTori.forEach(torus => {
                if (torus) {
                    updateTexture(torus.insidePlane);
                    updateTexture(torus.outsidePlane);
                }
            });
        }

        function switchTorus(index) {
            if (!allTori[index]) {
                allTori[index] = new Torus(chakraData[index].color, index);
            }

            allTori.forEach(t => t.group.visible = false);
            allTori[index].group.visible = true;
            activeTorusIndex = index;
            
            const chakra = chakraData[index];
            activeChakraHeader.textContent = `${chakra.name} Chakra`;
            activeChakraHeader.style.color = chakra.color;
            incrementStep(`Switched to ${chakra.name} Chakra`);

            document.querySelectorAll('.chakra-dot').forEach(dot => {
                dot.classList.toggle('active', parseInt(dot.dataset.index) === index);
            });

            updateUIForTorus(allTori[index]);
        }

        function updateUIForTorus(torus) {
            viewSelect.value = torus.state;
            interiorBtn.style.display = torus.hasBeenFormed ? 'block' : 'none';
        }
        
        function getIntersectedCell(event) {
            const activeTorus = allTori[activeTorusIndex];
            if (!activeTorus || !activeTorus.group.visible) return null;

            const rect = renderer.domElement.getBoundingClientRect();
            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            
            const objectsToIntersect = [activeTorus.insidePlane, activeTorus.outsidePlane];
            const intersects = raycaster.intersectObjects(objectsToIntersect);

            if (intersects.length > 0) {
                const intersect = intersects[0];
                const uv = intersect.uv;
                const cellX = Math.floor(uv.x * COLS);
                const cellY = ROWS - 1 - Math.floor(uv.y * ROWS);
                return { plane: intersect.object, x: cellX, y: cellY };
            }
            return null;
        }

        function onPointerDown(event) {
            if (controls.enablePan || controls.enableRotate) return;
            isDragging = true;
            const intersected = getIntersectedCell(event);
            if (intersected) {
                toggleCellSelection(intersected.plane, intersected.x, intersected.y);
            }
        }
        
        function onPointerMove(event) {
            const intersected = getIntersectedCell(event);
            const activeTorus = allTori[activeTorusIndex];

            if (activeTorus && activeTorus.group.visible) {
                updateTexture(activeTorus.insidePlane, activeTorus.insidePlane === intersected?.plane ? intersected : null);
                updateTexture(activeTorus.outsidePlane, activeTorus.outsidePlane === intersected?.plane ? intersected : null);
            }

            if (isDragging && !(controls.enablePan || controls.enableRotate) && intersected) {
                toggleCellSelection(intersected.plane, intersected.x, intersected.y, true);
            }
        }

        function onPointerUp() {
            if (isDragging) {
                incrementStep('Facet Drag Selection');
            }
            isDragging = false;
        }
        
        function onKey(event) {
            if (event.code === 'Space') {
                event.preventDefault();
                const isDown = event.type === 'keydown';
                controls.enablePan = isDown;
                controls.enableRotate = isDown;
                canvasContainer.style.cursor = isDown ? 'grab' : 'crosshair';
            }
        }

        function toggleCellSelection(plane, x, y, addOnly = false) {
            const torus = allTori.find(t => t.insidePlane === plane || t.outsidePlane === plane);
            if (!torus) return;
            const isInside = plane.name.includes('inside');
            const cellSet = isInside ? torus.selectedCells.inside : torus.selectedCells.outside;
            const key = `${x}-${y}`;
            
            let changed = false;
            if (cellSet.has(key) && !addOnly) {
                cellSet.delete(key);
                changed = true;
            } else if (!cellSet.has(key)) {
                cellSet.add(key);
                changed = true;
            }

            if (changed && !isDragging) {
                incrementStep('Toggled Cell');
            }
            
            updateTexture(plane);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function startAnimation(torus) {
            if (torus.state !== 'flat') return;
            torus.state = 'animating';
            incrementStep('Start Formation Animation');
            
            const duration = 1.5;
            const targetYInside = 0.5;
            const targetYOutside = -0.5;
            const insideStartPos = torus.insidePlane.position.clone();
            const outsideStartPos = torus.outsidePlane.position.clone();
            
            let elapsedTime = 0;
            const sandwichLoop = () => {
                elapsedTime += clock.getDelta();
                const progress = Math.min(elapsedTime / duration, 1);
                torus.insidePlane.position.lerpVectors(insideStartPos, new THREE.Vector3(0, targetYInside, 0), progress);
                torus.outsidePlane.position.lerpVectors(outsideStartPos, new THREE.Vector3(0, targetYOutside, 0), progress);
                if (progress < 1) requestAnimationFrame(sandwichLoop);
                else rollAnimation(torus);
            };
            sandwichLoop();
        }

        function rollAnimation(torus) {
            const duration = 2.0;
            const radius = GRID_HEIGHT / (2 * Math.PI);
            const posAttrIn = torus.insidePlane.geometry.attributes.position;
            const initPosIn = torus.initialPositions.inside;
            const posAttrOut = torus.outsidePlane.geometry.attributes.position;
            const initPosOut = torus.initialPositions.outside;
            let elapsedTime = 0;
            const rollLoop = () => {
                elapsedTime += clock.getDelta();
                const progress = Math.min(elapsedTime / duration, 1);
                const morph = (posAttr, initPos, rOffset) => {
                    for (let i = 0; i < posAttr.count; i++) {
                        const y = initPos[i * 3 + 1];
                        const angle = (y / GRID_HEIGHT) * 2 * Math.PI;
                        const targetY = Math.cos(angle) * (radius + rOffset);
                        const targetZ = Math.sin(angle) * (radius + rOffset);
                        posAttr.setY(i, y + (targetY - y) * progress);
                        posAttr.setZ(i, 0 + (targetZ - 0) * progress);
                    }
                    posAttr.needsUpdate = true;
                };
                morph(posAttrIn, initPosIn, -0.5);
                morph(posAttrOut, initPosOut, 0.5);
                if (progress < 1) requestAnimationFrame(rollLoop);
                else bendAnimation(torus);
            };
            rollLoop();
        }

        function bendAnimation(torus) {
            const duration = 2.5;
            const tubeRadius = GRID_HEIGHT / (2 * Math.PI);
            const torusRadius = tubeRadius;
            const posAttrIn = torus.insidePlane.geometry.attributes.position;
            const cylPosIn = posAttrIn.array.slice();
            const posAttrOut = torus.outsidePlane.geometry.attributes.position;
            const cylPosOut = posAttrOut.array.slice();
            let elapsedTime = 0;
            const bendLoop = () => {
                elapsedTime += clock.getDelta();
                const progress = Math.min(elapsedTime / duration, 1);
                const morph = (posAttr, initialPos, rOffset) => {
                    for (let i = 0; i < posAttr.count; i++) {
                        const cylX = initialPos[i * 3];
                        const cylY = initialPos[i * 3 + 1];
                        const cylZ = initialPos[i * 3 + 2];
                        const R = torusRadius;
                        const r = tubeRadius + rOffset;
                        const mainAngle = (cylX / GRID_WIDTH) * 2 * Math.PI;
                        const tubeAngle = Math.atan2(cylZ, cylY);
                        const targetX = (R + r * Math.cos(tubeAngle)) * Math.cos(mainAngle);
                        const targetY = r * Math.sin(tubeAngle);
                        const targetZ = (R + r * Math.cos(tubeAngle)) * Math.sin(mainAngle);
                        posAttr.setX(i, cylX + (targetX - cylX) * progress);
                        posAttr.setY(i, cylY + (targetY - cylY) * progress);
                        posAttr.setZ(i, cylZ + (targetZ - cylZ) * progress);
                    }
                    posAttr.needsUpdate = true;
                };
                morph(posAttrIn, cylPosIn, -0.5);
                morph(posAttrOut, cylPosOut, 0.5);
                if (progress < 1) requestAnimationFrame(bendLoop);
                else {
                    torus.state = 'torus';
                    torus.hasBeenFormed = true;
                    torus.torusPositions.inside = torus.insidePlane.geometry.attributes.position.array.slice();
                    torus.torusPositions.outside = torus.outsidePlane.geometry.attributes.position.array.slice();
                    updateUIForTorus(torus);
                }
            };
            bendLoop();
        }

        function setView(torus, view) {
             if (torus.state === 'animating' || cameraState.includes('moving')) return;
             if (view === 'torus') {
                torus.insidePlane.geometry.attributes.position.copyArray(torus.torusPositions.inside);
                torus.outsidePlane.geometry.attributes.position.copyArray(torus.torusPositions.outside);
                torus.insidePlane.position.set(0, 0, 0);
                torus.outsidePlane.position.set(0, 0, 0);
                torus.insidePlane.geometry.attributes.position.needsUpdate = true;
                torus.outsidePlane.geometry.attributes.position.needsUpdate = true;
                torus.state = 'torus';
             } else { // flat view
                torus.insidePlane.geometry.attributes.position.copyArray(torus.initialPositions.inside);
                torus.outsidePlane.geometry.attributes.position.copyArray(torus.initialPositions.outside);
                torus.insidePlane.position.set(0, GRID_HEIGHT / 2 + 20, 0);
                torus.outsidePlane.position.set(0, -(GRID_HEIGHT / 2 + 20), 0);
                torus.insidePlane.geometry.attributes.position.needsUpdate = true;
                torus.outsidePlane.geometry.attributes.position.needsUpdate = true;
                torus.state = 'flat';
             }
             updateUIForTorus(torus);
        }

        function toggleInteriorView(torus) {
            if (torus.state !== 'torus' || cameraState.includes('moving')) return;

            const duration = 1.5;
            let elapsedTime = 0;
            const startPos = camera.position.clone();
            const startTarget = controls.target.clone();

            if (cameraState === 'outside') {
                cameraState = 'moving-in';
                incrementStep('Enter Interior View');
                lastExteriorCamPos.copy(camera.position);
                const tubeRadius = GRID_HEIGHT / (2 * Math.PI);
                const torusRadius = tubeRadius;
                const endPos = new THREE.Vector3(torusRadius + tubeRadius / 2, 0, 0);
                const endTarget = new THREE.Vector3(0,0,0);
                
                const moveLoop = () => {
                    elapsedTime += clock.getDelta();
                    const progress = Math.min(elapsedTime / duration, 1);
                    camera.position.lerpVectors(startPos, endPos, progress);
                    controls.target.lerpVectors(startTarget, endTarget, progress);
                    if (progress < 1) requestAnimationFrame(moveLoop);
                    else {
                        cameraState = 'inside';
                        torus.outsidePlane.visible = false;
                        interiorBtn.textContent = 'Exit Interior';
                    }
                };
                moveLoop();
            } else { // cameraState is 'inside'
                cameraState = 'moving-out';
                incrementStep('Exit Interior View');
                const endPos = lastExteriorCamPos;
                const endTarget = new THREE.Vector3(0,0,0);
                
                const moveLoop = () => {
                    elapsedTime += clock.getDelta();
                    const progress = Math.min(elapsedTime / duration, 1);
                    camera.position.lerpVectors(startPos, endPos, progress);
                    controls.target.lerpVectors(startTarget, endTarget, progress);
                     if (progress < 1) requestAnimationFrame(moveLoop);
                    else {
                        cameraState = 'outside';
                        torus.outsidePlane.visible = true;
                        interiorBtn.textContent = 'Enter Interior';
                    }
                };
                moveLoop();
            }
        }
        
        function saveState() {
            incrementStep('State Saved');
            const stateToSave = allTori.map(torus => {
                if (!torus) return null;
                return {
                    selectedInside: Array.from(torus.selectedCells.inside),
                    selectedOutside: Array.from(torus.selectedCells.outside)
                };
            });
            localStorage.setItem('auraIntelligenceState', JSON.stringify(stateToSave));
            alert('State saved!');
        }
        
        function loadState() {
            incrementStep('State Loaded');
            const savedState = localStorage.getItem('auraIntelligenceState');
            if (savedState) {
                const loadedData = JSON.parse(savedState);
                loadedData.forEach((data, index) => {
                    if (data) {
                        if (!allTori[index]) {
                             allTori[index] = new Torus(chakraData[index].color, index);
                        }
                        const torus = allTori[index];
                        torus.selectedCells.inside = new Set(data.selectedInside);
                        torus.selectedCells.outside = new Set(data.selectedOutside);
                        updateTexture(torus.insidePlane);
                        updateTexture(torus.outsidePlane);
                    }
                });
                 alert('State loaded!');
            } else {
                alert('No saved state found.');
            }
        }
        
        function resetState() {
            incrementStep('State Reset');
            const torus = allTori[activeTorusIndex];
            if(torus) {
                torus.selectedCells.inside.clear();
                torus.selectedCells.outside.clear();
                updateTexture(torus.insidePlane);
                updateTexture(torus.outsidePlane);
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            if (controls.enabled) {
                controls.update();
            }
            
            gizmoCamera.quaternion.copy(camera.quaternion);
            
            renderer.autoClear = false;
            renderer.clear();
            renderer.render(scene, camera);
            
            gizmoRenderer.clearDepth();
            gizmoRenderer.render(gizmoScene, gizmoCamera);
        }

        function renderWeeklyView() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            grid.className = 'calendar-grid weekly-view';
            
            // Hide the regular calendar header for weekly view
            const header = document.querySelector('.calendar-header');
            header.innerHTML = '';
            header.style.display = 'none';
            
            // Define creative time/phase segments
            const timeSegments = [
                { time: '00:00', phase: '🌙 Night', color: '#1e293b' },
                { time: '06:00', phase: '🌅 Dawn', color: '#fbbf24' },
                { time: '09:00', phase: '☀️ Morning', color: '#f59e0b' },
                { time: '12:00', phase: '🌞 Noon', color: '#f97316' },
                { time: '15:00', phase: '🌤️ Afternoon', color: '#fbbf24' },
                { time: '18:00', phase: '🌆 Dusk', color: '#8b5cf6' },
                { time: '21:00', phase: '🌃 Evening', color: '#1e40af' }
            ];
            
            // Get week start (Sunday)
            const weekStart = new Date(currentDate);
            weekStart.setDate(currentDate.getDate() - currentDate.getDay());
            
            // Create time column header
            const timeHeader = document.createElement('div');
            timeHeader.className = 'time-header';
            timeHeader.textContent = 'Time';
            grid.appendChild(timeHeader);
            
            // Create day headers
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            for (let i = 0; i < 7; i++) {
                const dayDate = new Date(weekStart);
                dayDate.setDate(weekStart.getDate() + i);
                
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                dayHeader.innerHTML = `
                    <div class="text-center">
                        <div class="text-sm font-semibold">${dayNames[i]}</div>
                        <div class="text-xs">${dayDate.getDate()}</div>
                    </div>
                `;
                grid.appendChild(dayHeader);
            }
            
            // Create time slots and day columns
            for (let segmentIndex = 0; segmentIndex < timeSegments.length; segmentIndex++) {
                const segment = timeSegments[segmentIndex];
                
                // Create time slot label
                const timeSlot = document.createElement('div');
                timeSlot.className = 'time-slot';
                timeSlot.innerHTML = `
                    <div class="time-label">${segment.time}</div>
                    <div class="phase-label">${segment.phase}</div>
                `;
                grid.appendChild(timeSlot);
                
                // Create day columns for this time segment
                for (let dayIndex = 0; dayIndex < 7; dayIndex++) {
                    const dayDate = new Date(weekStart);
                    dayDate.setDate(weekStart.getDate() + dayIndex);
                    
                    const daySlot = document.createElement('div');
                    daySlot.className = 'day-slot';
                    
                    // Check if it's today
                    const today = new Date();
                    if (dayDate.toDateString() === today.toDateString()) {
                        daySlot.classList.add('today');
                    }
                    
                    // Add click handler
                    daySlot.onclick = () => {
                        const eventDate = new Date(dayDate);
                        eventDate.setHours(parseInt(segment.time.split(':')[0]));
                        showEventModal(eventDate);
                    };
                    
                    // Add events for this day and time segment
                    const dayEvents = events.filter(event => {
                        const eventDate = new Date(event.startDate);
                        const eventHour = eventDate.getHours();
                        const segmentHour = parseInt(segment.time.split(':')[0]);
                        
                        return eventDate.toDateString() === dayDate.toDateString() && 
                               eventHour >= segmentHour && 
                               eventHour < (segmentHour + 3); // 3-hour blocks
                    });
                    
                    dayEvents.forEach(event => {
                        const eventElement = document.createElement('div');
                        eventElement.className = `event-item event-${event.color}`;
                        eventElement.textContent = event.title;
                        eventElement.onclick = (e) => {
                            e.stopPropagation();
                            // Could add event editing here
                        };
                        daySlot.appendChild(eventElement);
                    });
                    
                    grid.appendChild(daySlot);
                }
            }
        }
        
        function renderQuarterlyView() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            grid.className = 'calendar-grid quarterly-view';
            
            const quarter = Math.floor(currentDate.getMonth() / 3);
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const quarterNames = ['Q1', 'Q2', 'Q3', 'Q4'];
            
            // Create quarterly view header
            const header = document.querySelector('.calendar-header');
            header.innerHTML = '';
            header.className = 'calendar-header grid grid-cols-3 gap-4 mb-2';
            
            // Add month headers for each month in the quarter
            for (let month = quarter * 3; month < (quarter + 1) * 3; month++) {
                const monthDiv = document.createElement('div');
                monthDiv.className = 'text-center text-sm font-semibold text-gray-400';
                monthDiv.textContent = `${months[month]} ${currentDate.getFullYear()}`;
                header.appendChild(monthDiv);
            }
            
            // Create 3 month columns side by side
            for (let month = quarter * 3; month < (quarter + 1) * 3; month++) {
                const monthDiv = document.createElement('div');
                monthDiv.className = 'flex flex-col space-y-1 h-full';
                
                // Get first day of month and number of days
                const firstDay = new Date(currentDate.getFullYear(), month, 1);
                const lastDay = new Date(currentDate.getFullYear(), month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startDay = firstDay.getDay();
                
                // Add empty cells for days before month starts
                for (let i = 0; i < startDay; i++) {
                    const emptyDiv = document.createElement('div');
                    emptyDiv.className = 'h-8';
                    monthDiv.appendChild(emptyDiv);
                }
                
                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayDiv = document.createElement('div');
                    dayDiv.className = 'calendar-day text-xs text-center p-1 rounded cursor-pointer hover:bg-gray-700';
                    
                    const date = new Date(currentDate.getFullYear(), month, day);
                    const today = new Date();
                    
                    if (date.toDateString() === today.toDateString()) {
                        dayDiv.classList.add('today');
                    }
                    
                    dayDiv.textContent = day;
                    dayDiv.onclick = () => showEventModal(date);
                    
                    // Add events for this day
                    const dayEvents = events.filter(event => {
                        const eventDate = new Date(event.startDate);
                        return eventDate.toDateString() === date.toDateString();
                    });
                    
                    if (dayEvents.length > 0) {
                        dayDiv.classList.add('bg-blue-600');
                    }
                    
                    monthDiv.appendChild(dayDiv);
                }
                
                grid.appendChild(monthDiv);
            }
        }
        
        function renderSeasonalView() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            grid.className = 'calendar-grid seasonal-view';
            
            const season = Math.floor(currentDate.getMonth() / 3);
            const seasonNames = ['Winter', 'Spring', 'Summer', 'Fall'];
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            // Create seasonal view header
            const header = document.querySelector('.calendar-header');
            header.innerHTML = '';
            header.className = 'calendar-header grid grid-cols-3 gap-4 mb-2';
            
            // Add month headers for each month in the season
            for (let month = season * 3; month < (season + 1) * 3; month++) {
                const monthDiv = document.createElement('div');
                monthDiv.className = 'text-center text-sm font-semibold text-gray-400';
                monthDiv.textContent = `${months[month]} ${currentDate.getFullYear()}`;
                header.appendChild(monthDiv);
            }
            
            // Create 3 month columns side by side
            for (let month = season * 3; month < (season + 1) * 3; month++) {
                const monthDiv = document.createElement('div');
                monthDiv.className = 'flex flex-col space-y-1 h-full';
                
                // Get first day of month and number of days
                const firstDay = new Date(currentDate.getFullYear(), month, 1);
                const lastDay = new Date(currentDate.getFullYear(), month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startDay = firstDay.getDay();
                
                // Add empty cells for days before month starts
                for (let i = 0; i < startDay; i++) {
                    const emptyDiv = document.createElement('div');
                    emptyDiv.className = 'h-8';
                    monthDiv.appendChild(emptyDiv);
                }
                
                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayDiv = document.createElement('div');
                    dayDiv.className = 'calendar-day text-xs text-center p-1 rounded cursor-pointer hover:bg-gray-700';
                    
                    const date = new Date(currentDate.getFullYear(), month, day);
                    const today = new Date();
                    
                    if (date.toDateString() === today.toDateString()) {
                        dayDiv.classList.add('today');
                    }
                    
                    dayDiv.textContent = day;
                    dayDiv.onclick = () => showEventModal(date);
                    
                    // Add events for this day
                    const dayEvents = events.filter(event => {
                        const eventDate = new Date(event.startDate);
                        return eventDate.toDateString() === date.toDateString();
                    });
                    
                    if (dayEvents.length > 0) {
                        dayDiv.classList.add('bg-blue-600');
                    }
                    
                    monthDiv.appendChild(dayDiv);
                }
                
                grid.appendChild(monthDiv);
            }
        }

        init();
        animate();
    </script>
</body>
</html>
